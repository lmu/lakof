/*! For license information please see 1.bundle.25d624b.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{126:function(e,t){e.exports='<span class="separator">/<span>\n<a href="<%- path %>" class="crumb"><%- text %></a>\n'},127:function(e,t){e.exports='<li><a href="<%- path %>" class="fav" aria-labelledby="blip"><%- title %></a></li>\n'},128:function(e,t){e.exports='<li class="pattern-relateditems-recentlyused">\n  <a class="pattern-relateditems-recentlyused-select" data-uid="<%- UID %>">\n    <div class="pattern-relateditems-recentlyused-info">\n      <span\n        class="pattern-relateditems-recentlyused-title <%- portal_type ? \'contenttype-\' + portal_type.toLowerCase() : \'\' %> <%- review_state ? \'state-\' + review_state : \'\' %>"\n        title="<%- portal_type %>">\n        <%- Title %>\n      </span>\n      <span class="pattern-relateditems-recentlyused-path"><%- path %></span>\n    </div>\n    <% if (getURL && (getIcon || portal_type === "Image")) { %>\n      <div class="pattern-relateditems-recentlyused-image">\n        <img src="<%- getURL %>/@@images/image/tile" />\n      </div>\n    <% } %>\n  </a>\n</li>\n'},129:function(e,t){e.exports='<div class="pattern-relateditems-result <%- oneLevelUp ? \'one-level-up\' : \'\' %>">\n  <div class="pattern-relateditems-result-browse-wrapper">\n  <% if (!oneLevelUp) { %>\n    <a\n      class="pattern-relateditems-result-select<%- selectable ? \' selectable\' : \'\' %><%- oneLevelUp ? \' one-level-up\' : \'\' %>"\n      data-path="<%- path %>">\n  <% } %>\n      <div class="pattern-relateditems-result-info">\n        <span\n          class="pattern-relateditems-result-title <%- portal_type ? \'contenttype-\' + portal_type.toLowerCase() : \'\' %> <%- review_state ? \'state-\' + review_state : \'\' %>"\n          title="<%- portal_type %>">\n          <%- Title %>\n        </span>\n        <span class="pattern-relateditems-result-path"><%- oneLevelUp ? currentPath : path %></span>\n      </div>\n      <% if (is_folderish) { %>\n        <a\n          class="pattern-relateditems-result-browse"\n          data-path="<%- path %>"\n          title="<%- oneLevelUp ? one_level_up : open_folder %>">\n          <span class="<%- oneLevelUp ? \'icon-left-circle\' : \'icon-right-circle\' %>"></span>\n        </a>\n      <% } %>\n  <% if (!oneLevelUp) { %>\n    </a>\n  <% } %>\n  </div>\n  <% if (getURL && (getIcon || portal_type === "Image")) { %>\n    <% if (!oneLevelUp) { %>\n    <a\n      class="pattern-relateditems-result-select<%- selectable ? \' selectable\' : \'\' %><%- oneLevelUp ? \' one-level-up\' : \'\' %>"\n      data-path="<%- path %>">\n    <% } %>\n    <div class="pattern-relateditems-result-image">\n      <img src="<%- getURL %>/@@images/image/thumb" />\n    </div>\n    <% if (!oneLevelUp) { %>\n    </a>\n    <% } %>\n  <% } %>\n</div>\n'},130:function(e,t){e.exports='<div class="pattern-relateditems-item">\n  <div class="pattern-relateditems-result-info">\n    <span\n      class="pattern-relateditems-item-title <%- portal_type ? \'contenttype-\' + portal_type.toLowerCase() : \'\' %> <%- review_state ? \'state-\' + review_state : \'\' %>"\n      title="<%- portal_type %>">\n      <%- Title %>\n    </span>\n    <span class="pattern-relateditems-item-path"><%- path %></span>\n  </div>\n  <% if (getURL && (getIcon || portal_type === "Image")) { %>\n    <div class="pattern-relateditems-item-image">\n      <img src="<%- getURL %>/@@images/image/thumb" />\n    </div>\n  <% } %>\n</div>\n'},131:function(e,t){e.exports='<% if (mode!==\'auto\') { %>\n<div class="btn-group mode-selector" role="group">\n  <button type="button" class="mode search btn <% if (mode==\'search\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- searchModeText %></button>\n  <button type="button" class="mode browse btn <% if (mode==\'browse\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- browseModeText %></button>\n</div>\n<% } %>\n<div class="path-wrapper">\n  <span class="pattern-relateditems-path-label"><%- searchText %></span>\n  <a class="crumb" href="/"><span class="glyphicon glyphicon-home"/></a>\n  <%= items %>\n</div>\n<div class="controls pull-right">\n\n  <% if (recentlyUsedItems) { %>\n  <div class="recentlyUsed dropdown pull-right">\n    <button type="button" class="recentlyUsed dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-time"/>\n      <%- recentlyUsedText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= recentlyUsedItems %>\n    </ul>\n  </div>\n  <% } %>\n\n  <% if (favorites.length > 0) { %>\n  <div class="favorites dropdown pull-right">\n    <button type="button" class="favorites dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-star"/>\n      <%- favText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= favItems %>\n    </ul>\n  </div>\n  <% } %>\n</div>\n'},133:function(e,t,i){var s,n,o;n=[i(0)],void 0===(o="function"==typeof(s=function(e){var t={exports:{}};return function(){var i,s,n,o,r,a,l,c,h=[].slice,p={}.hasOwnProperty;l=function(){},s=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,i,s,n;if(i=arguments[0],e=2<=arguments.length?h.call(arguments,1):[],this._callbacks=this._callbacks||{},t=this._callbacks[i])for(s=0,n=t.length;s<n;s++)t[s].apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var i,s,n,o;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(i=this._callbacks[e]))return this;if(1===arguments.length)return delete this._callbacks[e],this;for(s=n=0,o=i.length;n<o;s=++n)if(i[s]===t){i.splice(s,1);break}return this},e}(),(i=function(e){var t,i;function n(e,i){var s,o,r;if(this.element=e,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(n.instances.push(this),this.element.dropzone=this,s=null!=(r=n.optionsForElement(this.element))?r:{},this.options=t({},this.defaultOptions,s,null!=i?i:{}),this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=n.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=n.getElements(this.options.clickable,"clickable")),this.init()}return function(e,t){for(var i in t)p.call(t,i)&&(e[i]=t[i]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(n,e),n.prototype.Emitter=s,n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return l},forceFallback:!1,fallback:function(){var e,t,i,s,o,r;for(this.element.className=this.element.className+" dz-browser-not-supported",s=0,o=(r=this.element.getElementsByTagName("div")).length;s<o;s++)e=r[s],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),(i=t.getElementsByTagName("span")[0])&&(null!=i.textContent?i.textContent=this.options.dictFallbackMessage:null!=i.innerText&&(i.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,i,s;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},i=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=i*t.optHeight:null==t.optHeight&&(t.optHeight=1/i*t.optWidth),s=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):i>s?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*s):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/s),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:l,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:l,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,i,s,o,r,a,l,c,h,p,d,u,f;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=n.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),s=0,a=(h=e.previewElement.querySelectorAll("[data-dz-name]")).length;s<a;s++)h[s].textContent=this._renameFilename(e.name);for(o=0,l=(p=e.previewElement.querySelectorAll("[data-dz-size]")).length;o<l;o++)p[o].innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),f=this,t=function(t){return t.preventDefault(),t.stopPropagation(),e.status===n.UPLOADING?n.confirm(f.options.dictCancelUploadConfirmation,(function(){return f.removeFile(e)})):f.options.dictRemoveFileConfirmation?n.confirm(f.options.dictRemoveFileConfirmation,(function(){return f.removeFile(e)})):f.removeFile(e)},u=[],r=0,c=(d=e.previewElement.querySelectorAll("[data-dz-remove]")).length;r<c;r++)i=d[r],u.push(i.addEventListener("click",t));return u}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var i,s,n,o;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),s=0,n=(o=e.previewElement.querySelectorAll("[data-dz-thumbnail]")).length;s<n;s++)(i=o[s]).alt=e.name,i.src=t;return setTimeout((function(){return e.previewElement.classList.add("dz-image-preview")}),1)}},error:function(e,t){var i,s,n,o,r;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),r=[],s=0,n=(o=e.previewElement.querySelectorAll("[data-dz-errormessage]")).length;s<n;s++)i=o[s],r.push(i.textContent=t);return r}},errormultiple:l,processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:l,uploadprogress:function(e,t,i){var s,n,o,r,a;if(e.previewElement){for(a=[],n=0,o=(r=e.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length;n<o;n++)"PROGRESS"===(s=r[n]).nodeName?a.push(s.value=t):a.push(s.style.width=t+"%");return a}},totaluploadprogress:l,sending:l,sendingmultiple:l,success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:l,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:l,complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:l,maxfilesexceeded:l,maxfilesreached:l,queuecomplete:l,addedfiles:l,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},t=function(){var e,t,i,s,n,o,r;for(s=arguments[0],o=0,r=(i=2<=arguments.length?h.call(arguments,1):[]).length;o<r;o++)for(e in t=i[o])n=t[e],s[e]=n;return s},n.prototype.getAcceptedFiles=function(){var e,t,i,s,n;for(n=[],t=0,i=(s=this.files).length;t<i;t++)(e=s[t]).accepted&&n.push(e);return n},n.prototype.getRejectedFiles=function(){var e,t,i,s,n;for(n=[],t=0,i=(s=this.files).length;t<i;t++)(e=s[t]).accepted||n.push(e);return n},n.prototype.getFilesWithStatus=function(e){var t,i,s,n,o;for(o=[],i=0,s=(n=this.files).length;i<s;i++)(t=n[i]).status===e&&o.push(t);return o},n.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(n.QUEUED)},n.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(n.UPLOADING)},n.prototype.getAddedFiles=function(){return this.getFilesWithStatus(n.ADDED)},n.prototype.getActiveFiles=function(){var e,t,i,s,o;for(o=[],t=0,i=(s=this.files).length;t<i;t++)(e=s[t]).status!==n.UPLOADING&&e.status!==n.QUEUED||o.push(e);return o},n.prototype.init=function(){var e,t,i,s,o,r,a,l;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(l=this,(i=function(){return l.hiddenFileInput&&l.hiddenFileInput.parentNode.removeChild(l.hiddenFileInput),l.hiddenFileInput=document.createElement("input"),l.hiddenFileInput.setAttribute("type","file"),(null==l.options.maxFiles||l.options.maxFiles>1)&&l.hiddenFileInput.setAttribute("multiple","multiple"),l.hiddenFileInput.className="dz-hidden-input",null!=l.options.acceptedFiles&&l.hiddenFileInput.setAttribute("accept",l.options.acceptedFiles),null!=l.options.capture&&l.hiddenFileInput.setAttribute("capture",l.options.capture),l.hiddenFileInput.style.visibility="hidden",l.hiddenFileInput.style.position="absolute",l.hiddenFileInput.style.top="0",l.hiddenFileInput.style.left="0",l.hiddenFileInput.style.height="0",l.hiddenFileInput.style.width="0",document.querySelector(l.options.hiddenInputContainer).appendChild(l.hiddenFileInput),l.hiddenFileInput.addEventListener("change",(function(){var e,t,s,n;if((t=l.hiddenFileInput.files).length)for(s=0,n=t.length;s<n;s++)e=t[s],l.addFile(e);return l.emit("addedfiles",t),i()}))})()),this.URL=null!=(r=window.URL)?r:window.webkitURL,s=0,o=(a=this.events).length;s<o;s++)e=a[s],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout((function(){return e.emit("queuecomplete")}),0)}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(i){return t(i),e.emit("dragenter",i)}}(this),dragover:function(e){return function(i){var s;try{s=i.dataTransfer.effectAllowed}catch(e){}return i.dataTransfer.dropEffect="move"===s||"linkMove"===s?"move":"copy",t(i),e.emit("dragover",i)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(i){return t(i),e.drop(i)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(i){return(t!==e.element||i.target===e.element||n.elementInside(i.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var e,t,i,s,n,o,r;if(i=0,t=0,this.getActiveFiles().length){for(n=0,o=(r=this.getActiveFiles()).length;n<o;n++)i+=(e=r[n]).upload.bytesSent,t+=e.upload.total;s=100*i/t}else s=100;return this.emit("totaluploadprogress",s,t,i)},n.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},n.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},n.prototype.getFallbackForm=function(){var e,t,i,s;return(e=this.getExistingFallback())?e:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=n.createElement(i),"FORM"!==this.element.tagName?(s=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(t):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=s?s:t)},n.prototype.getExistingFallback=function(){var e,t,i,s,n,o;for(t=function(e){var t,i,s;for(i=0,s=e.length;i<s;i++)if(t=e[i],/(^| )fallback($| )/.test(t.className))return t},s=0,n=(o=["div","form"]).length;s<n;s++)if(i=o[s],e=t(this.element.getElementsByTagName(i)))return e},n.prototype.setupEventListeners=function(){var e,t,i,s,n,o,r;for(r=[],s=0,n=(o=this.listeners).length;s<n;s++)e=o[s],r.push(function(){var s,n;for(t in n=[],s=e.events)i=s[t],n.push(e.element.addEventListener(t,i,!1));return n}());return r},n.prototype.removeEventListeners=function(){var e,t,i,s,n,o,r;for(r=[],s=0,n=(o=this.listeners).length;s<n;s++)e=o[s],r.push(function(){var s,n;for(t in n=[],s=e.events)i=s[t],n.push(e.element.removeEventListener(t,i,!1));return n}());return r},n.prototype.disable=function(){var e,t,i,s,n;for(this.clickableElements.forEach((function(e){return e.classList.remove("dz-clickable")})),this.removeEventListeners(),n=[],t=0,i=(s=this.files).length;t<i;t++)e=s[t],n.push(this.cancelUpload(e));return n},n.prototype.enable=function(){return this.clickableElements.forEach((function(e){return e.classList.add("dz-clickable")})),this.setupEventListeners()},n.prototype.filesize=function(e){var t,i,s,n,o,r,a;if(i=0,s="b",e>0){for(t=r=0,a=(o=["TB","GB","MB","KB","b"]).length;r<a;t=++r)if(n=o[t],e>=Math.pow(this.options.filesizeBase,4-t)/10){i=e/Math.pow(this.options.filesizeBase,4-t),s=n;break}i=Math.round(10*i)/10}return"<strong>"+i+"</strong> "+s},n.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(e){var t,i;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&((i=e.dataTransfer.items)&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)))},n.prototype.paste=function(e){var t,i;if(null!=(null!=e&&null!=(i=e.clipboardData)?i.items:void 0))return this.emit("paste",e),(t=e.clipboardData.items).length?this._addFilesFromItems(t):void 0},n.prototype.handleFiles=function(e){var t,i,s,n;for(n=[],i=0,s=e.length;i<s;i++)t=e[i],n.push(this.addFile(t));return n},n.prototype._addFilesFromItems=function(e){var t,i,s,n,o;for(o=[],s=0,n=e.length;s<n;s++)null!=(i=e[s]).webkitGetAsEntry&&(t=i.webkitGetAsEntry())?t.isFile?o.push(this.addFile(i.getAsFile())):t.isDirectory?o.push(this._addFilesFromDirectory(t,t.name)):o.push(void 0):null==i.getAsFile||null!=i.kind&&"file"!==i.kind?o.push(void 0):o.push(this.addFile(i.getAsFile()));return o},n.prototype._addFilesFromDirectory=function(e,t){var i,s,n,o;return i=e.createReader(),s=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0},o=this,(n=function(){return i.readEntries((function(e){var i,s,r;if(e.length>0){for(s=0,r=e.length;s<r;s++)(i=e[s]).isFile?i.file((function(e){if(!o.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=t+"/"+e.name,o.addFile(e)})):i.isDirectory&&o._addFilesFromDirectory(i,t+"/"+i.name);n()}return null}),s)})()},n.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},n.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,(t=this,function(i){return i?(e.accepted=!1,t._errorProcessing([e],i)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}));var t},n.prototype.enqueueFiles=function(e){var t,i,s;for(i=0,s=e.length;i<s;i++)t=e[i],this.enqueueFile(t);return null},n.prototype.enqueueFile=function(e){if(e.status!==n.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=n.QUEUED,this.options.autoProcessQueue)return setTimeout((t=this,function(){return t.processQueue()}),0);var t},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout((t=this,function(){return t._processThumbnailQueue()}),0);var t},n.prototype._processThumbnailQueue=function(){var e;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),(e=this,function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}))},n.prototype.removeFile=function(e){if(e.status===n.UPLOADING&&this.cancelUpload(e),this.files=c(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},n.prototype.removeAllFiles=function(e){var t,i,s,o;for(null==e&&(e=!1),i=0,s=(o=this.files.slice()).length;i<s;i++)((t=o[i]).status!==n.UPLOADING||e)&&this.removeFile(t);return null},n.prototype.createThumbnail=function(e,t){var i,s;return(i=new FileReader).onload=(s=this,function(){return"image/svg+xml"===e.type?(s.emit("thumbnail",e,i.result),void(null!=t&&t())):s.createThumbnailFromUrl(e,i.result,t)}),i.readAsDataURL(e)},n.prototype.createThumbnailFromUrl=function(e,t,i,s){var n,o;return n=document.createElement("img"),s&&(n.crossOrigin=s),n.onload=(o=this,function(){var t,s,r,l,c,h,p,d;if(e.width=n.width,e.height=n.height,null==(r=o.options.resize.call(o,e)).trgWidth&&(r.trgWidth=r.optWidth),null==r.trgHeight&&(r.trgHeight=r.optHeight),s=(t=document.createElement("canvas")).getContext("2d"),t.width=r.trgWidth,t.height=r.trgHeight,a(s,n,null!=(c=r.srcX)?c:0,null!=(h=r.srcY)?h:0,r.srcWidth,r.srcHeight,null!=(p=r.trgX)?p:0,null!=(d=r.trgY)?d:0,r.trgWidth,r.trgHeight),l=t.toDataURL("image/png"),o.emit("thumbnail",e,l),null!=i)return i()}),null!=i&&(n.onerror=i),n.src=t},n.prototype.processQueue=function(){var e,t,i,s;if(t=this.options.parallelUploads,e=i=this.getUploadingFiles().length,!(i>=t)&&(s=this.getQueuedFiles()).length>0){if(this.options.uploadMultiple)return this.processFiles(s.slice(0,t-i));for(;e<t;){if(!s.length)return;this.processFile(s.shift()),e++}}},n.prototype.processFile=function(e){return this.processFiles([e])},n.prototype.processFiles=function(e){var t,i,s;for(i=0,s=e.length;i<s;i++)(t=e[i]).processing=!0,t.status=n.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},n.prototype._getFilesWithXhr=function(e){var t;return function(){var i,s,n,o;for(o=[],i=0,s=(n=this.files).length;i<s;i++)(t=n[i]).xhr===e&&o.push(t);return o}.call(this)},n.prototype.cancelUpload=function(e){var t,i,s,o,r,a,l;if(e.status===n.UPLOADING){for(s=0,r=(i=this._getFilesWithXhr(e.xhr)).length;s<r;s++)(t=i[s]).status=n.CANCELED;for(e.xhr.abort(),o=0,a=i.length;o<a;o++)t=i[o],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else(l=e.status)!==n.ADDED&&l!==n.QUEUED||(e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},i=function(){var e,t;return t=arguments[0],e=2<=arguments.length?h.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},n.prototype.uploadFile=function(e){return this.uploadFiles([e])},n.prototype.uploadFiles=function(e){var s,o,r,a,l,c,h,p,d,u,f,m,g,v,b,w,y,S,C,x,T,E,F,k,I,z,U,P,O,D,L,A,R,_;for(S=new XMLHttpRequest,C=0,F=e.length;C<F;C++)(s=e[C]).xhr=S;for(a in m=i(this.options.method,e),w=i(this.options.url,e),S.open(m,w,!0),S.withCredentials=!!this.options.withCredentials,v=null,_=this,r=function(){var t,i,n;for(n=[],t=0,i=e.length;t<i;t++)s=e[t],n.push(_._errorProcessing(e,v||_.options.dictResponseError.replace("{{statusCode}}",S.status),S));return n},b=function(t){return function(i){var n,o,r,a,l,c,h,p,d;if(null!=i)for(o=100*i.loaded/i.total,r=0,c=e.length;r<c;r++)(s=e[r]).upload={progress:o,total:i.total,bytesSent:i.loaded};else{for(n=!0,o=100,a=0,h=e.length;a<h;a++)100===(s=e[a]).upload.progress&&s.upload.bytesSent===s.upload.total||(n=!1),s.upload.progress=o,s.upload.bytesSent=s.upload.total;if(n)return}for(d=[],l=0,p=e.length;l<p;l++)s=e[l],d.push(t.emit("uploadprogress",s,o,s.upload.bytesSent));return d}}(this),S.onload=function(t){return function(i){var s;if(e[0].status!==n.CANCELED&&4===S.readyState){if(v=S.responseText,S.getResponseHeader("content-type")&&~S.getResponseHeader("content-type").indexOf("application/json"))try{v=JSON.parse(v)}catch(e){i=e,v="Invalid JSON response from server."}return b(),200<=(s=S.status)&&s<300?t._finished(e,v,i):r()}}}(this),S.onerror=function(){if(e[0].status!==n.CANCELED)return r()},(null!=(P=S.upload)?P:S).onprogress=b,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&t(c,this.options.headers),c)(l=c[a])&&S.setRequestHeader(a,l);if(o=new FormData,this.options.params)for(f in O=this.options.params)y=O[f],o.append(f,y);for(x=0,k=e.length;x<k;x++)s=e[x],this.emit("sending",s,S,o);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,S,o),"FORM"===this.element.tagName)for(T=0,I=(D=this.element.querySelectorAll("input, textarea, select, button")).length;T<I;T++)if(d=(p=D[T]).getAttribute("name"),u=p.getAttribute("type"),"SELECT"===p.tagName&&p.hasAttribute("multiple"))for(E=0,z=(L=p.options).length;E<z;E++)(g=L[E]).selected&&o.append(d,g.value);else(!u||"checkbox"!==(A=u.toLowerCase())&&"radio"!==A||p.checked)&&o.append(d,p.value);for(h=U=0,R=e.length-1;0<=R?U<=R:U>=R;h=0<=R?++U:--U)o.append(this._getParamName(h),e[h],this._renameFilename(e[h].name));return this.submitRequest(S,o,e)},n.prototype.submitRequest=function(e,t,i){return e.send(t)},n.prototype._finished=function(e,t,i){var s,o,r;for(o=0,r=e.length;o<r;o++)(s=e[o]).status=n.SUCCESS,this.emit("success",s,t,i),this.emit("complete",s);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},n.prototype._errorProcessing=function(e,t,i){var s,o,r;for(o=0,r=e.length;o<r;o++)(s=e[o]).status=n.ERROR,this.emit("error",s,t,i),this.emit("complete",s);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},n}(s)).version="4.3.0",i.options={},i.optionsForElement=function(e){return e.getAttribute("id")?i.options[n(e.getAttribute("id"))]:void 0},i.instances=[],i.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},i.autoDiscover=!0,i.discover=function(){var e,t,s,n,o,r;for(document.querySelectorAll?s=document.querySelectorAll(".dropzone"):(s=[],(e=function(e){var t,i,n,o;for(o=[],i=0,n=e.length;i<n;i++)t=e[i],/(^| )dropzone($| )/.test(t.className)?o.push(s.push(t)):o.push(void 0);return o})(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),r=[],n=0,o=s.length;n<o;n++)t=s[n],!1!==i.optionsForElement(t)?r.push(new i(t)):r.push(void 0);return r},i.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],i.isBrowserSupported=function(){var e,t,s,n;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(t=0,s=(n=i.blacklistedBrowsers).length;t<s;t++)n[t].test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},c=function(e,t){var i,s,n,o;for(o=[],s=0,n=e.length;s<n;s++)(i=e[s])!==t&&o.push(i);return o},n=function(e){return e.replace(/[\-_](\w)/g,(function(e){return e.charAt(1).toUpperCase()}))},i.createElement=function(e){var t;return(t=document.createElement("div")).innerHTML=e,t.childNodes[0]},i.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},i.getElement=function(e,t){var i;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},i.getElements=function(e,t){var i,s,n,o,r,a,l;if(e instanceof Array){s=[];try{for(n=0,r=e.length;n<r;n++)i=e[n],s.push(this.getElement(i,t))}catch(e){s=null}}else if("string"==typeof e)for(s=[],o=0,a=(l=document.querySelectorAll(e)).length;o<a;o++)i=l[o],s.push(i);else null!=e.nodeType&&(s=[e]);if(null==s||!s.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return s},i.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},i.isValidFile=function(e,t){var i,s,n,o,r;if(!t)return!0;for(t=t.split(","),i=(s=e.type).replace(/\/.*$/,""),o=0,r=t.length;o<r;o++)if("."===(n=(n=t[o]).trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(n.toLowerCase(),e.name.length-n.length))return!0}else if(/\/\*$/.test(n)){if(i===n.replace(/\/.*$/,""))return!0}else if(s===n)return!0;return!1},null!=e&&(e.fn.dropzone=function(e){return this.each((function(){return new i(this,e)}))}),null!=t?t.exports=i:window.Dropzone=i,i.ADDED="added",i.QUEUED="queued",i.ACCEPTED=i.QUEUED,i.UPLOADING="uploading",i.PROCESSING=i.UPLOADING,i.CANCELED="canceled",i.ERROR="error",i.SUCCESS="success",r=function(e){var t,i,s,n,o,r,a,l;for(e.naturalWidth,o=e.naturalHeight,(t=document.createElement("canvas")).width=1,t.height=o,(i=t.getContext("2d")).drawImage(e,0,0),s=i.getImageData(0,0,1,o).data,l=0,n=o,r=o;r>l;)0===s[4*(r-1)+3]?n=r:l=r,r=n+l>>1;return 0==(a=r/o)?1:a},a=function(e,t,i,s,n,o,a,l,c,h){var p;return p=r(t),e.drawImage(t,i,s,n,o,a,l,c,h/p)},o=function(e,t){var i,s,n,o,r,a,l,c,h;if(n=!1,h=!0,s=e.document,c=s.documentElement,i=s.addEventListener?"addEventListener":"attachEvent",l=s.addEventListener?"removeEventListener":"detachEvent",a=s.addEventListener?"":"on",o=function(i){if("readystatechange"!==i.type||"complete"===s.readyState)return("load"===i.type?e:s)[l](a+i.type,o,!1),!n&&(n=!0)?t.call(e,i.type||i):void 0},r=function(){try{c.doScroll("left")}catch(e){return void setTimeout(r,50)}return o("poll")},"complete"!==s.readyState){if(s.createEventObject&&c.doScroll){try{h=!e.frameElement}catch(e){}h&&r()}return s[i](a+"DOMContentLoaded",o,!1),s[i](a+"readystatechange",o,!1),e[i](a+"load",o,!1)}},i._autoDiscoverFunction=function(){if(i.autoDiscover)return i.discover()},o(window,i._autoDiscoverFunction)}.call(this),t.exports})?s.apply(t,n):s)||(e.exports=o)},134:function(e,t){e.exports='<div class="upload-container upload-multiple">\n    <h2 class="title"><%- _t("Upload here") %></h2>\n    <p class="help">\n        <%- _t(\'Drag and drop files from your computer onto the area below or click the Browse button.\') %>\n    </p>\n    <div class="upload-area">\n        <div class="fallback">\n            <input name="file" type="file" multiple />\n        </div>\n        <div class="dz-message"><p><%-_t("Drop files here...")%></p></div>\n        <div class="row browse-select">\n            <div class="col-md-9">\n                <input\n                    id="fakeUploadFile"\n                    placeholder="<%- _t("Choose File") %>"\n                    disabled\n                    />\n            </div>\n            <div class="col-md-3">\n                <button\n                    type="button"\n                    class="btn btn-primary browse">\n                    <%- _t("Browse") %>\n                </button>\n            </div>\n        </div>\n        <div class="upload-queue">\n            <div class="previews">\n            </div>\n            <div class="controls">\n                <% if (allowPathSelection) { %>\n                <div class="path">\n                    <label><%- _t("Upload to...") %></label>\n                    <p class="form-help">\n                        <%- _t("Select another destination folder or leave blank to add files to the current location.") %>\n                    </p>\n                    <input\n                        type="text"\n                        name="location"\n                        />\n                </div>\n                <% } %>\n                <div class="actions row">\n                    <div class="col-md-9">\n                        <div class="progress progress-striped active">\n                            <div class="progress-bar progress-bar-success"\n                                 role="progressbar"\n                                 aria-valuenow="0"\n                                 aria-valuemin="0"\n                                 aria-valuemax="100"\n                                 style="width: 0%">\n                                <span class="sr-only">40% Complete (success)</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-3 align-right">\n                        <button\n                            type="button"\n                            class="btn btn-primary upload-all">\n                            <%- _t("Upload") %>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},135:function(e,t){e.exports='<div class="row item form-inline">\n    <div class="col-md-1 action">\n        <button\n            type="button"\n            class="btn btn-danger btn-xs remove-item"\n            data-dz-remove=""\n            href="javascript:undefined;">\n            <span class="glyphicon glyphicon-remove"></span>\n        </button>\n    </div>\n    <div class="col-md-8 title">\n        <div class="dz-preview">\n          <div class="dz-details">\n            <div class="dz-filename"><span data-dz-name></span></div>\n          </div>\n          <div class="dz-error-message"><span data-dz-errormessage></span></div>\n        </div>\n        <div class="dz-progress">\n            <span class="dz-upload" data-dz-uploadprogress></span>\n        </div>\n    </div>\n    <div class="col-md-3 info">\n        <div class="dz-size" data-dz-size></div>\n        <img data-dz-thumbnail />\n    </div>\n</div>\n'},41:function(e,t,i){var s,n;s=[i(0),i(2),i(43),i(40)],void 0===(n=function(e,t,i,s){"use strict";return i.View.extend({isUIView:!0,eventPrefix:"ui",template:null,idPrefix:"base-",appendInContainer:!0,initialize:function(e){for(var t in this.options=e,this.options)this[t]=this.options[t];this.options._t=s},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){if(null!==this.template){var i=e.extend({_t:s},this.options,this.serializedModel()),n=this.template;"string"==typeof n&&(n=t.template(n)),this.$el.html(n(i))}},propagateEvent:function(e){if(e.indexOf(":")>0){var t=e.split(":")[0];if(""!==this.eventPrefix&&(t===this.eventPrefix||t===this.eventPrefix+"."+this.id))return!0}return!1},uiEventTrigger:function(e){var t=[].slice.call(arguments,0);""!==this.eventPrefix&&(t[0]=this.eventPrefix+":"+e,i.View.prototype.trigger.apply(this,t),this.id&&(t[0]=this.eventPrefix+"."+this.id+":"+e,i.View.prototype.trigger.apply(this,t)))}})}.apply(t,s))||(e.exports=n)},47:function(e,t,i){var s,n;s=[i(0),i(38),i(39),i(87),i(88),i(89)],void 0===(n=function(e,t,i){"use strict";return t.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var t=this;t.options.initialValues&&(t.options.id=function(e){return e.id},t.options.initSelection=function(s,n){var o=[],r=s.val(),a=t.options.initialValues;"string"==typeof t.options.initialValues&&""!==t.options.initialValues&&("{"===t.options.initialValues[0]?a=JSON.parse(t.options.initialValues):(a={},e(t.options.initialValues.split(t.options.separator)).each((function(){var t=this.split(":"),i=e.trim(t[0]),s=e.trim(t[1]);a[i]=s})))),e(r.split(t.options.separator)).each((function(){var e=this;a[this]&&(e=a[this]),o.push({id:i.removeHTML(this),text:i.removeHTML(e)})})),n(o)})},initializeTags:function(){this.options.tags&&"string"==typeof this.options.tags&&("["===this.options.tags.substr(0,1)?this.options.tags=JSON.parse(this.options.tags):this.options.tags=this.options.tags.split(this.options.separator)),this.options.tags&&!this.options.allowNewItems&&(this.options.data=e.map(this.options.tags,(function(e,t){return{id:e,text:e}})),this.options.multiple=!0,delete this.options.tags)},initializeOrdering:function(){var t=this;if(t.options.orderable){var i=function(e,t){return e?e.text:void 0};t.options.formatSelection&&(i=t.options.formatSelection),t.options.formatSelection=function(s,n){return n.parents("li").drag("start",(function(i,s){return e(this).addClass("select2-choice-dragging"),t.$el.select2("onSortStart"),e.drop({tolerance:function(t,i,s){var n=t.pageY>s.top+s.height/2;return e.data(s.elem,"drop+reorder",n?"insertAfter":"insertBefore"),this.contains(s,[t.pageX,t.pageY])}}),e(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)})).drag((function(t,i){e(i.proxy).css({top:i.offsetY,left:i.offsetX});var s=i.drop[0],n=e.data(s||{},"drop+reorder");!s||s==i.current&&n==i.method||(e(this)[n](s),i.current=s,i.method=n,i.update())})).drag("end",(function(i,s){e(this).removeClass("select2-choice-dragging"),t.$el.select2("onSortEnd"),e(s.proxy).remove()})).drop("init",(function(e,t){return this!=t.drag})),i(s,n)}}},initializeSelect2:function(){this.options.formatResultCssClass=function(e){if(e.id)return"select2-option-"+e.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},this.$el.select2(this.options),this.$select2=this.$el.parent().find(".select2-container"),this.$el.parent().off("close.plone-modal.patterns"),this.options.orderable&&this.$select2.addClass("select2-orderable")},opened:function(){return 1===e(".select2-dropdown-open",this.$el.parent()).length},init:function(){var t=this;if(t.options.allowNewItems=!t.options.hasOwnProperty("allowNewItems")||JSON.parse(t.options.allowNewItems),t.options.ajax||t.options.vocabularyUrl){t.options.vocabularyUrl&&(t.options.multiple=void 0===t.options.multiple||t.options.multiple,t.options.ajax=t.options.ajax||{},t.options.ajax.url=t.options.vocabularyUrl,t.options.initSelection=function(s,n){var o=[],r=s.val();e(r.split(t.options.separator)).each((function(){var e=i.removeHTML(this);o.push({id:e,text:e})})),n(o)});var s="";t.options.ajax=e.extend({quietMillis:300,data:function(e,t){return s=e,{query:e,page_limit:10,page:t}},results:function(n,o){var r=n.results;if(t.options.vocabularyUrl){var a=[];e.each(n.results,(function(e,t){a.push(t.id)})),r=[];var l=""===s||e.inArray(s,a)>=0;t.options.allowNewItems&&!l&&(s=i.removeHTML(s),r.push({id:s,text:s})),e.each(n.results,(function(e,t){r.push(t)}))}return{results:r}}},t.options.ajax)}else if(t.options.multiple&&t.$el.is("select")){var n=t.$el.val()||[],o=e.map(t.$el.find("option"),(function(t){return{text:e(t).html(),id:t.value}})),r=e('<input type="hidden" />');r.val(n.join(t.options.separator)),r.attr("class",t.$el.attr("class")),r.attr("name",t.$el.attr("name")),r.attr("id",t.$el.attr("id")),t.$orig=t.$el,t.$el.replaceWith(r),t.$el=r,t.options.data=o}t.initializeValues(),t.initializeTags(),t.initializeOrdering(),t.initializeSelect2()}})}.apply(t,s))||(e.exports=n)},50:function(e,t,i){var s,n;s=[i(2),i(41),i(64)],void 0===(n=function(e,t,i){"use strict";return t.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"default",idPrefix:"btn-",attributes:{href:"#"},extraClasses:[],tooltip:null,template:'<% if (icon) { %><span class="glyphicon glyphicon-<%= icon %>"></span><% } %> <%= title %>',events:{click:"handleClick"},initialize:function(s){if(!s.id){var n=s.title||"";s.id=""!==n?n.toLowerCase().replace(" ","-"):this.cid}t.prototype.initialize.apply(this,[s]),this.on("render",(function(){if(this.$el.attr("title",this.options.title||""),this.$el.attr("aria-label",this.options.title||this.options.tooltip||""),null!==this.context&&this.$el.addClass("btn-"+this.context),e.each(this.extraClasses,(function(e){this.$el.addClass(e)})),null!==this.tooltip){this.$el.attr("title",this.tooltip);new i(this.$el);this.$el.on("hidden",(function(e){"hidden"===e.type&&e.stopPropagation()}))}}),this)},handleClick:function(e){e.preventDefault(),this.$el.prop("disabled")||this.uiEventTrigger("click",this,e)},serializedModel:function(){return e.extend({icon:"",title:""},this.options)},disable:function(){this.$el.prop("disabled",!0)},enable:function(){this.$el.prop("disabled",!1)}})}.apply(t,s))||(e.exports=n)},52:function(e,t,i){var s,n;s=[i(0),i(2),i(38),i(47),i(50),i(39),i(1),i(40),i(126),i(127),i(128),i(129),i(130),i(131),i(19)],void 0===(n=function(e,t,s,n,o,r,a,l,c,h,p,d,u,f){"use strict";var m=37,g=39;return s.extend({name:"relateditems",trigger:".pat-relateditems",parser:"mockup",currentPath:void 0,selectedUIDs:[],openAfterInit:void 0,defaults:{vocabularyUrl:null,attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],basePath:"",pageSize:10,browsing:void 0,closeOnSelect:!0,contextPath:void 0,dropdownCssClass:"pattern-relateditems-dropdown",favorites:[],recentlyUsed:!1,recentlyUsedMaxItems:20,recentlyUsedKey:"relateditems_recentlyused",maximumSelectionSize:-1,minimumInputLength:0,mode:"auto",orderable:!0,pathOperator:"plone.app.querystring.operation.string.path",rootPath:"/",rootUrl:"",scanSelection:!1,selectableTypes:null,separator:",",sortOn:null,sortOrder:"ascending",tokenSeparators:[","," "],upload:!1,uploadAllowView:void 0,width:"100%",breadcrumbTemplate:c,breadcrumbTemplateSelector:null,favoriteTemplate:h,favoriteTemplateSelector:null,recentlyusedTemplate:p,recentlyusedTemplateSelector:null,resultTemplate:d,resultTemplateSelector:null,selectionTemplate:u,selectionTemplateSelector:null,toolbarTemplate:f,toolbarTemplateSelector:null,multiple:!0},recentlyUsed:function(e){var t=r.storage.get(this.options.recentlyUsedKey)||[];t=t.slice(t.length-1e3,t.length),e&&t.filter(this.isSelectable.bind(this));var i=parseInt(this.options.recentlyUsedMaxItems,10);return i&&(t=t.slice(t.length-i,t.length)),t},applyTemplate:function(i,s){var n;this.options[i+"TemplateSelector"]&&(n=e(this.options[i+"TemplateSelector"]).html())||(n=this.options[i+"Template"]);var o=e.extend(!0,{},this.options,s,{browsing:this.browsing,open_folder:l("Open folder"),current_directory:l("current directory:"),one_level_up:l("Go one level up")});return o._item=s,t.template(n)(o)},setAjax:function(){var e={url:this.options.vocabularyUrl,dataType:"JSON",quietMillis:500,data:function(e,t){var i=[];e&&(e="*"+e+"*",i.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:e})),!this.browsing&&this.options.selectableTypes&&i.push({i:"portal_type",o:"plone.app.querystring.operation.selection.any",v:this.options.selectableTypes}),i.push({i:"path",o:this.options.pathOperator,v:this.options.rootPath+this.currentPath+(this.browsing?"::1":"")});var s=this.options.sortOn,n=s?this.options.sortOrder:null;return this.browsing&&null===s&&(s="getObjPositionInParent",n="ascending"),{query:JSON.stringify({criteria:i,sort_on:s,sort_order:n}),attributes:JSON.stringify(this.options.attributes),batch:JSON.stringify({page:t||1,size:this.options.pageSize})}}.bind(this),results:function(e,t){var i=t*this.options.pageSize<e.total,s=e.results;this.selectedUIDs=(this.$el.select2("data")||[]).map((function(e){return e.UID})),s=s.filter(function(e){return!!(this.browsing&&e.is_folderish||this.isSelectable(e)&&-1===this.selectedUIDs.indexOf(e.UID))}.bind(this));var n=this.currentPath.split("/");return 1===t&&this.browsing&&n.length>1&&"/"!==this.currentPath&&(s=[{oneLevelUp:!0,Title:l("One level up"),path:n.slice(0,n.length-1).join("/")||"/",currentPath:this.currentPath,is_folderish:!0,selectable:!1}].concat(s)),{results:s,more:i}}.bind(this)};this.options.ajax=e},renderToolbar:function(){var s,n=this,a=n.currentPath.split("/"),c="",h="";t.each(a,(function(e){if(""!==e){var t={};t.path=c=c+"/"+e,t.text=e,h+=n.applyTemplate("breadcrumb",t)}}));var p="";t.each(n.options.favorites,(function(e){var i=t.clone(e);i.path=i.path.substr(n.options.rootPath.length)||"/",p+=n.applyTemplate("favorite",i)}));var d="";if(n.options.recentlyUsed){var u=n.recentlyUsed(!0);t.each(u.reverse(),(function(e){d+=n.applyTemplate("recentlyused",e)}))}function f(t,i){var s="upload-"+r.generateId(),a=new o({id:s,title:l("Upload"),tooltip:l("Upload files"),icon:"upload"});i&&a.disable(),e(".controls",n.$toolbar).prepend(a.render().el),n.uploadView=new t({triggerView:a,app:n}),e("#btn-"+s,n.$toolbar).append(n.uploadView.render().el)}s=n.applyTemplate("toolbar",{items:h,favItems:p,favText:l("Favorites"),searchText:l("Current path:"),searchModeText:l("Search"),browseModeText:l("Browse"),recentlyUsedItems:d,recentlyUsedText:l("Recently Used")}),n.$toolbar.html(s),e(".dropdown-toggle",n.$toolbar).dropdown(),e(".pattern-relateditems-dropdown").unbind("mouseup"),e(".pattern-relateditems-dropdown").bind("mouseup",(function(e){e.stopPropagation()})),e("button.mode.search",n.$toolbar).on("click",(function(t){t.preventDefault(),n.browsing?(e("button.mode.search",n.$toolbar).toggleClass("btn-primary btn-default"),e("button.mode.browse",n.$toolbar).toggleClass("btn-primary btn-default"),n.browsing=!1,n.$el.select2("data").length>0&&(n.openAfterInit=!0),n.openAfterInit||(n.$el.select2("close"),n.$el.select2("open"))):(n.$el.select2("close"),n.$el.select2("open"))})),e("button.mode.browse",n.$toolbar).on("click",(function(t){t.preventDefault(),n.browsing?(n.$el.select2("close"),n.$el.select2("open")):(e("button.mode.search",n.$toolbar).toggleClass("btn-primary btn-default"),e("button.mode.browse",n.$toolbar).toggleClass("btn-primary btn-default"),n.browsing=!0,n.$el.select2("data").length>0&&(n.openAfterInit=!0),n.openAfterInit||(n.$el.select2("close"),n.$el.select2("open")))})),e("a.crumb",n.$toolbar).on("click",(function(t){t.preventDefault(),n.browseTo(e(this).attr("href"))})),e("a.fav",n.$toolbar).on("click",(function(t){t.preventDefault(),n.browseTo(e(this).attr("href"))})),n.options.recentlyUsed&&e(".pattern-relateditems-recentlyused-select",n.$toolbar).on("click",(function(t){t.preventDefault();var i=e(this).data("uid"),s=n.recentlyUsed().filter((function(e){return e.UID===i}));if(s.length>0&&(s=s[0],n.selectItem(s),n.options.maximumSelectionSize>0&&n.$el.select2("data").length>=n.options.maximumSelectionSize))return})),n.options.upload&&r.featureSupport.dragAndDrop()&&r.featureSupport.fileApi()&&i.e(18).then((function(){var t=[i(225)];(function(t){n.options.uploadAllowView?e.ajax({url:n.options.uploadAllowView,dataType:"JSON",data:{path:n.options.rootPath+n.currentPath},type:"GET",success:function(e){f(t,!e.allowUpload)}}):f(t)}).apply(null,t)})).catch(i.oe)},browseTo:function(e){this.emit("before-browse"),this.currentPath=e,this.$el.select2("close"),this.renderToolbar(),this.$el.select2("open"),this.emit("after-browse")},selectItem:function(e){this.emit("selecting");var t=this.$el.select2("data");if(t.push(e),this.$el.select2("data",t,!0),this.options.recentlyUsed){var i=this.recentlyUsed(),s=i.filter((function(t){return t.UID===e.UID}));s.length>0&&i.splice(i.indexOf(s[0]),1),i.push(e),r.storage.set(this.options.recentlyUsedKey,i)}this.emit("selected")},deselectItem:function(e){this.emit("deselecting");var i=this.$el.select2("data");t.each(i,(function(t,s){t.UID===e.UID&&i.splice(s,1)})),this.$el.select2("data",i,!0),this.emit("deselected")},isSelectable:function(e){return!1!==e.selectable&&(null===this.options.selectableTypes||-1!==this.options.selectableTypes.indexOf(e.portal_type))},init:function(){var t=this;t.browsing="search"!==t.options.mode,t.options.rootPath=t.options.rootPath.replace(/\/$/,""),t.currentPath=t.options.basePath.substr(t.options.rootPath.length)||"/",t.setAjax(),t.$el.wrap('<div class="pattern-relateditems-container" />'),t.$container=t.$el.parents(".pattern-relateditems-container"),t.$container.width(t.options.width),n.prototype.initializeValues.call(t),n.prototype.initializeTags.call(t),t.options.formatSelection=function(i){i=e.extend(!0,{Title:"",getIcon:"",getURL:"",path:"",portal_type:"",review_state:""},i);var s=e(t.applyTemplate("selection",i));if(t.options.scanSelection&&a.scan(s),1==t.options.maximumSelectionSize){var n=i.path,o=n.split("/");n=(o=o.slice(0,-1)).join("/"),t.currentPath=n,t.renderToolbar()}return s},n.prototype.initializeOrdering.call(t),t.options.formatResult=function(i){i.selectable=t.isSelectable(i),i=e.extend(!0,{Title:"",getIcon:"",getURL:"",is_folderish:!1,oneLevelUp:!1,path:"",portal_type:"",review_state:"",selectable:!1},i),-1!==t.selectedUIDs.indexOf(i.UID)&&(i.selectable=!1);var s=e(t.applyTemplate("result",i));return e(".pattern-relateditems-result-select",s).on("click",(function(s){if(s.preventDefault(),e(this).is(".selectable")){var n=e(this).parents(".pattern-relateditems-result");if(n.is(".pattern-relateditems-active"))n.removeClass("pattern-relateditems-active"),t.deselectItem(i);else{if(t.options.maximumSelectionSize>0)t.$el.select2("data").length>=t.options.maximumSelectionSize&&t.$el.select2("close");t.selectItem(i),n.addClass("pattern-relateditems-active"),t.options.closeOnSelect&&t.$el.select2("close")}}})),e(".pattern-relateditems-result-browse",s).on("click",(function(i){i.preventDefault(),i.stopPropagation();var s=e(this).data("path");t.browseTo(s)})),e(s)},t.options.initSelection=function(i,s){var n=e(i).val();if(""!==n){var o=n.split(t.options.separator);new r.QueryHelper(e.extend(!0,{},t.options,{pattern:t})).search("UID","plone.app.querystring.operation.list.contains",o,(function(e){var i=e.results.reduce((function(e,t){return e[t.UID]=t,e}),{});try{s(o.map((function(e){return i[e]})).filter((function(e){return void 0!==e})))}catch(e){}t.openAfterInit&&(t.$el.select2("open"),t.openAfterInit=void 0)}),!1)}},t.options.tokenizer=function(e){"auto"===this.options.mode&&(this.browsing=!e)}.bind(this),t.options.id=function(e){return e.UID},n.prototype.initializeSelect2.call(t),t.$toolbar=e('<div class="toolbar ui-offset-parent" />'),t.$container.prepend(t.$toolbar),t.$el.on("select2-selecting",(function(e){t.isSelectable(e.choice)||e.preventDefault()})),t.renderToolbar(),e(document).on("keyup",t.$el,(function(i){if(n.prototype.opened.call(t)&&(i.which===m||i.which===g)){i.stopPropagation();var s=i.which===m?".pattern-relateditems-result.one-level-up":".select2-highlighted",o=e(".pattern-relateditems-result-browse",s);if(1!==o.length)return;var r=o.data("path");t.browseTo(r)}}))}})}.apply(t,s))||(e.exports=n)},54:function(e,t,i){var s,n;s=[i(0),i(2),i(38),i(52),i(133),i(134),i(135),i(39),i(40)],void 0===(n=function(e,t,i,s,n,o,r,a,l){"use strict";return n.autoDiscover=!1,i.extend({name:"upload",trigger:".pat-upload",parser:"mockup",defaults:{showTitle:!0,url:null,className:"upload",wrap:!1,wrapperTemplate:'<div class="upload-wrapper"/>',fileaddedClassName:"dropping",useTus:!1,container:"",ajaxUpload:!0,paramName:"file",addRemoveLinks:!1,autoCleanResults:!0,previewsContainer:".previews",previewTemplate:null,maxFiles:null,maxFilesize:99999999,allowPathSelection:void 0,relatedItems:{attributes:["UID","Title","Description","getURL","portal_type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,selectableTypes:["Folder"]}},init:function(){var i=this,s=o;void 0===i.options.allowPathSelection&&(i.options.allowPathSelection=i.options.baseUrl&&i.options.relativePath),e(document).bind("paste",(function(e){var t=e.originalEvent.clipboardData.items;if(t)for(var s=0;s<t.length;s++)if(-1!==t[s].type.indexOf("image")){var n=t[s].getAsFile();i.dropzone.addFile(n)}})),i.currentPath=i.options.currentPath,i.currentFile=0,s=t.template(s)({_t:l,allowPathSelection:i.options.allowPathSelection}),i.$el.addClass(i.options.className),i.$el.append(s),i.$progress=e(".progress-bar-success",i.$el),i.options.showTitle||i.$el.find("h2.title").hide(),i.options.ajaxUpload||(e(".fallback",this.$el).remove(),this.$el.hasClass(".upload-container")?this.$el.addClass("no-ajax-upload"):this.$el.closest(".upload-container").addClass("no-ajax-upload")),i.options.wrap&&(i.$el.wrap(i.options.wrapperTemplate),i.$el=i.$el.parent()),i.options.allowPathSelection?(i.$pathInput=e('input[name="location"]',i.$el),i.relatedItems=i.setupRelatedItems(i.$pathInput)):(e('input[name="location"]',i.$el).parent().remove(),i.relatedItems=null),i.$dropzone=e(".upload-area",i.$el),e("div.browse-select button.browse",i.$el).click((function(e){e.preventDefault(),e.stopPropagation(),(!i.options.maxFiles||i.dropzone.files.length<i.options.maxFiles)&&i.dropzone.hiddenFileInput.click()}));var r=this.getDzoneOptions();try{i.dropzone=new n(i.$dropzone[0],r)}catch(e){throw window.DEBUG&&console.log(e),e}i.dropzone.on("maxfilesreached",(function(){i.showHideControls()})),i.dropzone.on("addedfile",(function(){i.showHideControls()})),i.dropzone.on("removedfile",(function(){i.showHideControls()})),i.dropzone.on("success",(function(t,s){var n;try{n=e.parseJSON(s)}catch(e){n=s}i.$el.trigger("uploadAllCompleted",{data:n,path_uid:i.$pathInput?i.$pathInput.val():null})})),i.options.autoCleanResults&&i.dropzone.on("complete",(function(t){t.status===n.SUCCESS&&setTimeout((function(){e(t.previewElement).fadeOut()}),3e3)})),i.dropzone.on("complete",(function(e){e.status===n.SUCCESS&&1===i.dropzone.files.length&&i.showHideControls()})),i.dropzone.on("error",(function(t,i,s){void 0!==s&&403!==s.status&&e(".dz-error-message span",t.previewElement).html(l("The file transfer failed"))})),i.dropzone.on("totaluploadprogress",(function(e){e=(100*(i.currentFile-1)+e)/(100*i.dropzone.files.length)*100,i.$progress.attr("aria-valuenow",e).css("width",e+"%")})),e(".upload-all",i.$el).click((function(e){e.preventDefault(),e.stopPropagation(),i.processUpload({finished:function(){i.$progress.attr("aria-valuenow",0).css("width","0%")}})})),i.options.clipboardfile&&i.dropzone.addFile(i.options.clipboardfile)},showHideControls:function(){var e=this;e._showHideTimeout&&clearTimeout(e._showHideTimeout),e._showHideTimeout=setTimeout((function(){e._showHideControls()}),50)},_showHideControls:function(){var t=e(".controls",this.$el),i=e(".browse-select",this.$el),s=e(".dz-hidden-input");if(this.options.maxFiles&&(this.dropzone.files.length<this.options.maxFiles?(i.show(),s.prop("disabled",!1)):(i.hide(),s.prop("disabled",!0))),this.dropzone.files.length>0){t.fadeIn("slow");var n=this.dropzone.files[0];e(".dz-error-message span",n.previewElement).html("")}else t.fadeOut("slow")},pathJoin:function(){var e=[];return t.each(arguments,(function(t){t&&("/"===t[0]&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),e.push(t))})),e.join("/")},getUrl:function(){var e=this.options.url;if(!e)if(this.options.baseUrl&&this.options.relativePath)"/"!==(e=this.options.baseUrl)[e.length-1]&&(e+="/"),e+=this.pathJoin(this.currentPath,this.options.relativePath);else{var t=this.$el.parents("form");e=t.length>0?t.attr("action"):window.location.href}return e},getDzoneOptions:function(){this.options.clickable=!0;var t=e.extend({},this.options);if(t.url=this.getUrl(),t.headers={"X-CSRF-TOKEN":a.getAuthenticator()},t.uploadMultiple=!1,delete t.wrap,delete t.wrapperTemplate,delete t.resultTemplate,delete t.autoCleanResults,delete t.fileaddedClassName,delete t.useTus,this.options.previewsContainer){var i=this.$el.find(this.options.previewsContainer);i.length>0&&(t.previewsContainer=i[0])}return t.autoProcessQueue=!1,t.previewTemplate=r,t},processUpload:function(e){e||(e={});var t=this,i=!1,s=t.options.useTus,o=t.options.fileaddedClassName,r=e.finished;t.currentFile=0,function e(){i=!0,0===t.dropzone.files.length&&(i=!1);var a=t.dropzone.files[0];if(i&&a.status===n.ERROR&&(a.status=n.QUEUED,i=!1),!i)return t.$el.removeClass(o),void(void 0!==r&&"function"==typeof r&&r());-1!==[n.SUCCESS,n.CANCELED].indexOf(a.status)?(t.dropzone.removeFile(a),e()):a.status!==n.UPLOADING?(s&&window.tus?t.handleTusUpload(a):(t.currentFile+=1,t.dropzone.processFile(a)),setTimeout(e,100)):setTimeout(e,100)}()},handleTusUpload:function(t){var i=this;e(t.previewElement);t.status=n.UPLOADING,window.tus.upload(t,{endpoint:i.dropzone.options.url,headers:{FILENAME:t.name,"X-CSRF-TOKEN":a.getAuthenticator()},chunkSize:5242880}).fail((function(){window.DEBUG&&console.alert(l("Error uploading with TUS resumable uploads")),t.status=n.ERROR})).progress((function(e,t,s){var n=t/s*100;i.$progress.attr("aria-valuenow",n).css("width",n+"%"),i.$progress.html(l("uploading...")+"<br />"+i.formatBytes(t)+" / "+i.formatBytes(s))})).done((function(e,t){t.status=n.SUCCESS,i.dropzone.emit("success",t),i.dropzone.emit("complete",t)}))},formatBytes:function(e){var t=Math.round(e/1024);if(t<1024)return t+" KiB";var i=Math.round(t/1024);return i<1024?i+" MB":Math.round(i/1024)+" GB"},setPath:function(e){this.currentPath=e,this.options.url=null,this.options.url=this.dropzone.options.url=this.getUrl()},setupRelatedItems:function(t){var i=this,n=i.options.relatedItems;n.upload=!1,i.options.initialFolder&&t.attr("value",i.options.initialFolder);var o=new s(t,n);return o.$el.on("change",(function(){var t=e(this).select2("data"),s=null;t.length>0&&(s=t[0].path),i.setPath(s)})),o}})}.apply(t,s))||(e.exports=n)},64:function(e,t,i){var s,n;s=[i(0),i(38)],void 0===(n=function(e,t,i){"use strict";var s=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};return s.VERSION="3.2.0",s.DEFAULTS={animation:!0,placement:"auto",selector:!1,template:'<div class="tooltip mockup-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!0,container:!1,viewport:{selector:"body",padding:0}},s.prototype.init=function(t,i,s){this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(s),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var n=this.options.trigger.split(" "),o=n.length;o--;){var r=n[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},s.prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},s.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,(function(e,s){i[e]!=s&&(t[e]=s)})),t},s.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout((function(){"in"==i.hoverState&&i.show()}),i.options.delay.show)},s.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout((function(){"out"==i.hoverState&&i.hide()}),i.options.delay.hide)},s.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(document.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var s=this,n=this.tip(),o=this.getUID(this.type);this.setContent(),n.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&n.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,l=a.test(r);l&&(r=r.replace(a,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var c=this.getPosition(),h=n[0].offsetWidth,p=n[0].offsetHeight;if(l){var d=r,u=this.$element.parent(),f=this.getPosition(u);r="bottom"==r&&c.top+c.height+p-f.scroll>f.height?"top":"top"==r&&c.top-f.scroll-p<0?"bottom":"right"==r&&c.right+h>f.width?"left":"left"==r&&c.left-h<f.left?"right":r,n.removeClass(d).addClass(r)}var m=this.getCalculatedOffset(r,c,h,p);this.applyPlacement(m,r);var g=function(){s.$element.trigger("shown.bs."+s.type),s.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},s.prototype.applyPlacement=function(t,i){var s=this.tip(),n=s[0].offsetWidth,o=s[0].offsetHeight,r=parseInt(s.css("margin-top"),10),a=parseInt(s.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),t.top=t.top+r,t.left=t.left+a,e.offset.setOffset(s[0],e.extend({using:function(e){s.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),s.addClass("in");var l=s[0].offsetWidth,c=s[0].offsetHeight;"top"==i&&c!=o&&(t.top=t.top+o-c);var h=this.getViewportAdjustedDelta(i,t,l,c);h.left?t.left+=h.left:t.top+=h.top;var p=h.left?2*h.left-n+l:2*h.top-o+c,d=h.left?"left":"top",u=h.left?"offsetWidth":"offsetHeight";s.offset(t),this.replaceArrow(p,s[0][u],d)},s.prototype.replaceArrow=function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},s.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},s.prototype.hide=function(){var t=this,i=this.tip(),s=e.Event("hide.bs."+this.type);function n(){"in"!=t.hoverState&&i.detach(),t.$element.trigger("hidden.bs."+t.type)}if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(s),!s.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",n).emulateTransitionEnd(150):n(),this.hoverState=null,this},s.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},s.prototype.hasContent=function(){return this.getTitle()},s.prototype.getPosition=function(t){var i=(t=t||this.$element)[0],s="BODY"==i.tagName;return e.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:s?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:s?e(window).width():t.outerWidth(),height:s?e(window).height():t.outerHeight()},s?{top:0,left:0}:t.offset())},s.prototype.getCalculatedOffset=function(e,t,i,s){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-s,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-s/2,left:t.left-i}:{top:t.top+t.height/2-s/2,left:t.left+t.width}},s.prototype.getViewportAdjustedDelta=function(e,t,i,s){var n={top:0,left:0};if(!this.$viewport)return n;var o=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-o-r.scroll,l=t.top+o-r.scroll+s;a<r.top?n.top=r.top-a:l>r.top+r.height&&(n.top=r.top+r.height-l)}else{var c=t.left-o,h=t.left+o+i;c<r.left?n.left=r.left-c:h>r.width&&(n.left=r.left+r.width-h)}return n},s.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},s.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},s.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},s.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},s.prototype.enable=function(){this.enabled=!0},s.prototype.disable=function(){this.enabled=!1},s.prototype.toggleEnabled=function(){this.enabled=!this.enabled},s.prototype.toggle=function(t){var i=this;t&&((i=e(t.currentTarget).data("bs."+this.type))||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},s.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)},t.extend({name:"tooltip",trigger:".pat-tooltip",parser:"mockup",defaults:{html:!1,placement:"top"},init:function(){"true"===this.options.html?this.options.html=!0:this.options.html=!1,this.data=new s(this.$el[0],this.options)}})}.apply(t,s))||(e.exports=n)},87:function(e,t,i){var s,n=i(0);void 0===(s=n).fn.each2&&s.extend(s.fn,{each2:function(e){for(var t=s([0]),i=-1,n=this.length;++i<n&&(t.context=t[0]=this[i])&&!1!==e.call(t[0],i,t););return this}}),function(e,t){"use strict";if(void 0===window.Select2){var i,s,n,o,r,a,l,c,h={x:0,y:0},p={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case p.LEFT:case p.RIGHT:case p.UP:case p.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case p.SHIFT:case p.CTRL:case p.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},d={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};a=e(document),c=1,o=function(){return c++},i=P(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(t){var i,s;this.opts=t=this.prepareOpts(t),this.id=t.id,void 0!==t.element.data("select2")&&null!==t.element.data("select2")&&t.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(t.element.attr("id")||"autogen"+o()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",t.element.attr("title")),this.body=e(document.body),C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",t.element.attr("style")),this.container.css(z(t.containerCss,this.opts.element)),this.container.addClass(z(t.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",S),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(t.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",S),this.results=i=this.container.find(".select2-results"),this.search=s=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",S),this.results.on("mousemove",(function(t){var i=h;void 0!==i&&i.x===t.pageX&&i.y===t.pageY||e(t.target).trigger("mousemove-filtered",t)})),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind((function(e){this._touchEvent=!0,this.highlightUnderEvent(e)}))),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(e,t){var i=y(e,(function(e){t.trigger("scroll-debounced",e)}));t.on("scroll",(function(e){m(e.target,t.get())>=0&&i(e)}))}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()})),e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()})),e.fn.mousewheel&&i.mousewheel((function(e,t,s,n){var o=i.scrollTop();n>0&&o-n<=0?(i.scrollTop(0),S(e)):n<0&&i.get(0).scrollHeight-i.scrollTop()+n<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),S(e))})),w(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",(function(){s.addClass("select2-focused")})),s.on("blur",(function(){s.removeClass("select2-focused")})),this.dropdown.on("mouseup",".select2-results",this.bind((function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(e){e.stopPropagation()})),this.lastSearchTerm=void 0,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==t.maximumInputLength&&this.search.attr("maxlength",t.maximumInputLength);var n=t.element.prop("disabled");void 0===n&&(n=!1),this.enable(!n);var r=t.element.prop("readonly");void 0===r&&(r=!1),this.readonly(r),l=l||function(){var t=e("<div class='select2-measure-scrollbar'></div>");t.appendTo(document.body);var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}(),this.autofocus=t.element.prop("autofocus"),t.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",t.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,t=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&i._sync&&e.each((function(){i._sync&&this.detachEvent("onpropertychange",i._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,void 0!==t&&(t.container.remove(),t.liveRegion.remove(),t.dropdown.remove(),e.removeData("select2").off(".select2"),e.is("input[type='hidden']")?e.css("display",""):(e.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())),U.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:g(e.attr("locked"),"locked")||g(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(t){var i,s,n,r,a=this;if("select"===(i=t.element).get(0).tagName.toLowerCase()&&(this.select=s=t.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in t)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),t.debug=t.debug||e.fn.select2.defaults.debug,t.debug&&console&&console.warn&&(null!=t.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=t.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=t.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=t.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=t.ajax&&null!=t.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=t.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=t.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=t.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=t.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=t.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=t.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),t.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=t.element.data("tags")){var l=t.element.data("tags");e.isArray(l)||(l=[]),t.element.data("select2Tags",l)}if(null!=t.sorter&&(t.sortResults=t.sorter),null!=t.selectOnClose&&(t.selectOnBlur=t.selectOnClose),null!=t.ajax&&e.isFunction(t.ajax.processResults)&&(t.ajax.results=t.ajax.processResults),null!=t.language){var c=t.language;e.isFunction(c.noMatches)&&(t.formatNoMatches=c.noMatches),e.isFunction(c.searching)&&(t.formatSearching=c.searching),e.isFunction(c.inputTooShort)&&(t.formatInputTooShort=c.inputTooShort),e.isFunction(c.inputTooLong)&&(t.formatInputTooLong=c.inputTooLong),e.isFunction(c.loadingMore)&&(t.formatLoading=c.loadingMore),e.isFunction(c.maximumSelected)&&(t.formatSelectionTooBig=c.maximumSelected)}if("function"!=typeof(t=e.extend({},{populateResults:function(i,s,n){var r,l=this.opts.id,c=this.liveRegion;(r=function(i,s,h){var p,d,u,f,m,g,v,b,w,y,S=[];for(p=0,d=(i=t.sortResults(i,s,n)).length;p<d;p+=1)f=!(m=!0===(u=i[p]).disabled)&&void 0!==l(u),g=u.children&&u.children.length>0,(v=e("<li></li>")).addClass("select2-results-dept-"+h),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(a.opts.formatResultCssClass(u)),v.attr("role","presentation"),(b=e(document.createElement("div"))).addClass("select2-result-label"),b.attr("id","select2-result-label-"+o()),b.attr("role","option"),void 0!==(y=t.formatResult(u,b,n,a.opts.escapeMarkup))&&(b.html(y),v.append(b)),g&&((w=e("<ul></ul>")).addClass("select2-result-sub"),r(u.children,w,h+1),v.append(w)),v.data("select2-data",u),S.push(v[0]);s.append(S),c.text(t.formatMatches(i.length))})(s,i,0)}},e.fn.select2.defaults,t)).id&&(n=t.id,t.id=function(e){return e[n]}),e.isArray(t.element.data("select2Tags"))){if("tags"in t)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+t.element.attr("id");t.tags=t.element.data("select2Tags")}if(s?(t.query=this.bind((function(e){var t,s,n,o={results:[],more:!1},r=e.term;n=function(t,i){var s;t.is("option")?e.matcher(r,t.text(),t)&&i.push(a.optionToData(t)):t.is("optgroup")&&(s=a.optionToData(t),t.children().each2((function(e,t){n(t,s.children)})),s.children.length>0&&i.push(s))},t=i.children(),void 0!==this.getPlaceholder()&&t.length>0&&(s=this.getPlaceholderOption())&&(t=t.not(s)),t.each2((function(e,t){n(t,o.results)})),e.callback(o)})),t.id=function(e){return e.id}):"query"in t||("ajax"in t?((r=t.element.data("ajax-url"))&&r.length>0&&(t.ajax.url=r),t.query=E.call(t.element,t.ajax)):"data"in t?t.query=F(t.data):"tags"in t&&(t.query=k(t.tags),void 0===t.createSearchChoice&&(t.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),void 0===t.initSelection&&(t.initSelection=function(i,s){var n=[];e(v(i.val(),t.separator,t.transformVal)).each((function(){var i={id:this,text:this},s=t.tags;e.isFunction(s)&&(s=s()),e(s).each((function(){if(g(this.id,i.id))return i=this,!1})),n.push(i)})),s(n)}))),"function"!=typeof t.query)throw"query function not defined for Select2 "+t.element.attr("id");if("top"===t.createSearchChoicePosition)t.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===t.createSearchChoicePosition)t.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof t.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return t},monitorSource:function(){var t,i=this.opts.element,s=this;i.on("change.select2",this.bind((function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var e=i.prop("disabled");void 0===e&&(e=!1),this.enable(!e);var t=i.prop("readonly");void 0===t&&(t=!1),this.readonly(t),this.container&&(C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(z(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(this.opts.dropdownCssClass,this.opts.element)))})),i.length&&i[0].attachEvent&&i.each((function(){this.attachEvent("onpropertychange",s._sync)})),void 0!==(t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new t((function(t){e.each(t,s._sync)})),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){void 0===e&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){void 0===e&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,s,n,o,r=this.dropdown,a=this.container,c=a.offset(),h=a.outerHeight(!1),p=a.outerWidth(!1),d=r.outerHeight(!1),u=e(window),f=u.width(),m=u.height(),g=u.scrollLeft()+f,v=u.scrollTop()+m,b=c.top+h,w=c.left,y=b+d<=v,S=c.top-d>=u.scrollTop(),C=r.outerWidth(!1);r.hasClass("select2-drop-above")?(i=!0,!S&&y&&(s=!0,i=!1)):(i=!1,!y&&S&&(s=!0,i=!0)),s&&(r.hide(),c=this.container.offset(),h=this.container.outerHeight(!1),p=this.container.outerWidth(!1),d=r.outerHeight(!1),g=u.scrollLeft()+f,v=u.scrollTop()+m,b=c.top+h,w=c.left,C=r.outerWidth(!1),r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),(C=r.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:l.width))>p?p=C:C=p,d=r.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(b-=(t=this.body.offset()).top,w-=t.left),!(w+C<=g)&&c.left+g+a.outerWidth(!1)>C&&(w=c.left+this.container.outerWidth(!1)-C),n={left:w,width:p},i?(this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above"),d=r.outerHeight(!1),n.top=c.top-d,n.bottom="auto"):(n.top=b,n.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),n=e.extend(n,z(this.opts.dropdownCss,this.opts.element)),r.css(n)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),a.on("mousemove.select2Event",(function(e){h.x=e.pageX,h.y=e.pageY})),!0)},opening:function(){var t,i=this.containerEventName,s="scroll."+i,n="resize."+i,o="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",(function(i){u(t);var s,n=e("#select2-drop");n.length>0&&((s=n.data("select2")).opts.selectOnBlur&&s.selectHighlighted({noFocus:!0}),s.close(),i.preventDefault(),i.stopPropagation())}))),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each((function(){e(this).on(n+" "+s+" "+o,(function(e){r.opened()&&r.positionDropdown()}))}))},close:function(){if(this.opened()){var t=this.containerEventName,i="scroll."+t,s="resize."+t,n="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(i).off(s).off(n)})),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),a.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return void 0!==e&&(this.search.val(e),this.search.select(),!0)},getMaximumSelectionSize:function(){return z(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,i,s,n,o,r,a,l,c=this.results;(i=this.highlight())<0||(0!=i?(t=this.findHighlightableChoices().find(".select2-result-label"),n=(l=((s=e(t[i])).offset()||{}).top||0)+s.outerHeight(!0),i===t.length-1&&(a=c.find("li.select2-more-results")).length>0&&(n=a.offset().top+a.outerHeight(!0)),n>(o=c.offset().top+c.outerHeight(!1))&&c.scrollTop(c.scrollTop()+(n-o)),(r=l-c.offset().top)<0&&"none"!=s.css("display")&&c.scrollTop(c.scrollTop()+r)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),s=this.highlight();s>-1&&s<i.length;){var n=e(i[s+=t]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(s);break}}},highlight:function(t){var i,s,n=this.findHighlightableChoices();if(0===arguments.length)return m(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1),t<0&&(t=0),this.removeHighlight(),(i=e(n[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),(s=i.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(s),choice:s})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var s=this.findHighlightableChoices();this.highlight(s.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),i=this.resultsPage+1,s=this,n=this.search.val(),o=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:n,page:i,context:o,matcher:this.opts.matcher,callback:this.bind((function(r){s.opened()&&(s.opts.populateResults.call(this,e,r.results,{term:n,page:i,context:o}),s.postprocessResults(r,!1,!1),!0===r.more?(t.detach().appendTo(e).html(s.opts.escapeMarkup(z(s.opts.formatLoadMore,s.opts.element,i+1))),window.setTimeout((function(){s.loadMoreIfNeeded()}),10)):t.remove(),s.positionDropdown(),s.resultsPage=i,s.context=r.context,this.opts.element.trigger({type:"select2-loaded",items:r}))}))}))},tokenize:function(){},updateResults:function(t){var i,s,n,o=this.search,r=this.results,a=this.opts,l=this,c=o.val(),h=e.data(this.container,"select2-last-term");if((!0===t||!h||!g(c,h))&&(e.data(this.container,"select2-last-term",c),!0===t||!1!==this.showSearchInput&&this.opened())){n=++this.queryCount;var p=this.getMaximumSelectionSize();if(!(p>=1&&(i=this.data(),e.isArray(i)&&i.length>=p&&I(a.formatSelectionTooBig,"formatSelectionTooBig"))))return o.val().length<a.minimumInputLength?(I(a.formatInputTooShort,"formatInputTooShort")?u("<li class='select2-no-results'>"+z(a.formatInputTooShort,a.element,o.val(),a.minimumInputLength)+"</li>"):u(""),void(t&&this.showSearch&&this.showSearch(!0))):void(a.maximumInputLength&&o.val().length>a.maximumInputLength?I(a.formatInputTooLong,"formatInputTooLong")?u("<li class='select2-no-results'>"+z(a.formatInputTooLong,a.element,o.val(),a.maximumInputLength)+"</li>"):u(""):(a.formatSearching&&0===this.findHighlightableChoices().length&&u("<li class='select2-searching'>"+z(a.formatSearching,a.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),null!=(s=this.tokenize())&&null!=s&&o.val(s),this.resultsPage=1,a.query({element:a.element,term:o.val(),page:this.resultsPage,context:null,matcher:a.matcher,callback:this.bind((function(i){var s;if(n==this.queryCount)if(this.opened())if(void 0!==i.hasError&&I(a.formatAjaxError,"formatAjaxError"))u("<li class='select2-ajax-error'>"+z(a.formatAjaxError,a.element,i.jqXHR,i.textStatus,i.errorThrown)+"</li>");else{if(this.context=void 0===i.context?null:i.context,this.opts.createSearchChoice&&""!==o.val()&&null!=(s=this.opts.createSearchChoice.call(l,o.val(),i.results))&&void 0!==l.id(s)&&null!==l.id(s)&&0===e(i.results).filter((function(){return g(l.id(this),l.id(s))})).length&&this.opts.createSearchChoicePosition(i.results,s),0===i.results.length&&I(a.formatNoMatches,"formatNoMatches"))return u("<li class='select2-no-results'>"+z(a.formatNoMatches,a.element,o.val())+"</li>"),void(this.showSearch&&this.showSearch(o.val()));r.empty(),l.opts.populateResults.call(this,r,i.results,{term:o.val(),page:this.resultsPage,context:null}),!0===i.more&&I(a.formatLoadMore,"formatLoadMore")&&(r.append("<li class='select2-more-results'>"+a.escapeMarkup(z(a.formatLoadMore,a.element,this.resultsPage))+"</li>"),window.setTimeout((function(){l.loadMoreIfNeeded()}),10)),this.postprocessResults(i,t),d(),this.opts.element.trigger({type:"select2-loaded",items:i})}else this.search.removeClass("select2-active")}))})));u("<li class='select2-selection-limit'>"+z(a.formatSelectionTooBig,a.element,p)+"</li>")}function d(){o.removeClass("select2-active"),l.positionDropdown(),r.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?l.liveRegion.text(r.text()):l.liveRegion.text(l.opts.formatMatches(r.find('.select2-result-selectable:not(".select2-selected")').length))}function u(e){r.html(e),d()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var t,i=e[0],s=e.val().length;e.focus(),(i.offsetWidth>0||i.offsetHeight>0)&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(s,s):i.createTextRange&&((t=i.createTextRange()).collapse(!1),t.select()))}),0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||(void 0!==(e=this.getPlaceholderOption())?e.text():void 0)},getPlaceholderOption:function(){if(this.select){var t=this.select.children("option").first();if(void 0!==this.opts.placeholderOption)return"first"===this.opts.placeholderOption&&t||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(t.text())&&""===t.val())return t}},initContainerWidth:function(){var t=function(){var t,i,s,n,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if("string"==typeof(t=this.opts.element.attr("style")))for(n=0,o=(i=t.split(";")).length;n<o;n+=1)if(null!==(s=i[n].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&s.length>=1)return s[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width")).indexOf("%")>0?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==t&&this.container.css("width",t)}}),s=P(i,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,i,s;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(t=this.search.get(0)).createTextRange?((i=t.createTextRange()).collapse(!1),i.select()):t.setSelectionRange&&(s=this.search.val().length,t.setSelectionRange(s,s))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),U.call(this,"selection","focusser")},initContainer:function(){var t,i,s=this.container,n=this.dropdown,r=o();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=s.find(".select2-choice"),this.focusser=s.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+r),this.focusser.attr("aria-labelledby","select2-chosen-"+r),this.results.attr("id","select2-results-"+r),this.search.attr("aria-owns","select2-results-"+r),this.focusser.attr("id","s2id_autogen"+r),i=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind((function(){this.focus()}))),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==p.PAGE_UP&&e.which!==p.PAGE_DOWN)switch(e.which){case p.UP:case p.DOWN:return this.moveHighlight(e.which===p.UP?-1:1),void S(e);case p.ENTER:return this.selectHighlighted(),void S(e);case p.TAB:return void this.selectHighlighted({noFocus:!0});case p.ESC:return this.cancel(e),void S(e)}else S(e)}))),this.search.on("blur",this.bind((function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.results&&this.results.length>1&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&e.which!==p.TAB&&!p.isControl(e)&&!p.isFunctionKey(e)&&e.which!==p.ESC){if(!1!==this.opts.openOnEnter||e.which!==p.ENTER){if(e.which==p.DOWN||e.which==p.UP||e.which==p.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void S(e)}return e.which==p.DELETE||e.which==p.BACKSPACE?(this.opts.allowClear&&this.clear(),void S(e)):void 0}S(e)}}))),w(this.focusser),this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}}))),t.on("mousedown touchstart","abbr",this.bind((function(e){var t;this.isInterfaceEnabled()&&(this.clear(),(t=e).preventDefault(),t.stopImmediatePropagation(),this.close(),this.selection&&this.selection.focus())}))),t.on("mousedown touchstart",this.bind((function(i){u(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),S(i)}))),n.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),t.on("focus",this.bind((function(e){S(e)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var s=e.Event("select2-clearing");if(this.opts.element.trigger(s),s.isDefaultPrevented())return;var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,(function(t){null!=t&&(e.updateSelection(t),e.close(),e.setPlaceholder(),e.lastSearchTerm=e.search.val())}))}},isPlaceholderOptionSelected:function(){var e;return void 0!==this.getPlaceholder()&&(void 0!==(e=this.getPlaceholderOption())&&e.prop("selected")||""===this.opts.element.val()||void 0===this.opts.element.val()||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var s=e.find("option").filter((function(){return this.selected&&!this.disabled}));t(i.optionToData(s))}:"data"in t&&(t.initSelection=t.initSelection||function(i,s){var n=i.val(),o=null;t.query({matcher:function(e,i,s){var r=g(n,t.id(s));return r&&(o=s),r},callback:e.isFunction(s)?function(){s(o)}:e.noop})}),t},getPlaceholder:function(){if(!this.select||void 0!==this.getPlaceholderOption())return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&void 0!==e){if(this.select&&void 0===this.getPlaceholderOption())return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,i,s){var n=0,o=this;if(this.findHighlightableChoices().each2((function(e,t){if(g(o.id(t.data("select2-data")),o.opts.element.val()))return n=e,!1})),!1!==s&&(!0===i&&n>=0?this.highlight(n):this.highlight(0)),!0===i){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(function t(i){var s=0;return e.each(i,(function(e,i){i.children?s+=t(i.children):s++})),s}(t.results)>=r)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),s=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(i,this.id(e))||this.triggerChange({added:e,removed:s})}},updateSelection:function(e){var t,i,s=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),s.empty(),null!==e&&(t=this.opts.formatSelection(e,s,this.opts.escapeMarkup)),void 0!==t&&s.append(t),void 0!==(i=this.opts.formatSelectionCssClass(e,s))&&s.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&void 0!==this.getPlaceholder()&&this.container.addClass("select2-allowclear")},val:function(){var e,t=!1,i=null,s=this,n=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(t=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){return i=s.optionToData(t),!1})),this.updateSelection(i),this.setPlaceholder(),t&&this.triggerChange({added:i,removed:n});else{if(!e&&0!==e)return void this.clear(t);if(void 0===this.opts.initSelection)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,(function(e){s.opts.element.val(e?s.id(e):""),s.updateSelection(e),s.setPlaceholder(),t&&s.triggerChange({added:e,removed:n})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var t,i=!1;if(0===arguments.length)return null==(t=this.selection.data("select2-data"))&&(t=null),t;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),arguments.length>1&&(i=arguments[1]),e?(t=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:t})):this.clear(i)}}),n=P(i,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var s=[];e.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(e,t){s.push(i.optionToData(t))})),t(s)}:"data"in t&&(t.initSelection=t.initSelection||function(i,s){var n=v(i.val(),t.separator,t.transformVal),o=[];t.query({matcher:function(i,s,r){var a=e.grep(n,(function(e){return g(e,t.id(r))})).length;return a&&o.push(r),a},callback:e.isFunction(s)?function(){for(var e=[],i=0;i<n.length;i++)for(var r=n[i],a=0;a<o.length;a++){var l=o[a];if(g(r,t.id(l))){e.push(l),o.splice(a,1);break}}s(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),U.call(this,"searchContainer","selection")},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var s=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",(function(t){s.search[0].focus(),s.selectChoice(e(this))})),this.search.attr("id","s2id_autogen"+o()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind((function(){this.focus()}))),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(i){if(this.isInterfaceEnabled()){++this.keydowns;var s=t.find(".select2-search-choice-focus"),n=s.prev(".select2-search-choice:not(.select2-locked)"),o=s.next(".select2-search-choice:not(.select2-locked)"),r=function(t){var i=0,s=0;if("selectionStart"in(t=e(t)[0]))i=t.selectionStart,s=t.selectionEnd-i;else if("selection"in document){t.focus();var n=document.selection.createRange();s=document.selection.createRange().text.length,n.moveStart("character",-t.value.length),i=n.text.length-s}return{offset:i,length:s}}(this.search);if(s.length&&(i.which==p.LEFT||i.which==p.RIGHT||i.which==p.BACKSPACE||i.which==p.DELETE||i.which==p.ENTER)){var a=s;return i.which==p.LEFT&&n.length?a=n:i.which==p.RIGHT?a=o.length?o:null:i.which===p.BACKSPACE?this.unselect(s.first())&&(this.search.width(10),a=n.length?n:o):i.which==p.DELETE?this.unselect(s.first())&&(this.search.width(10),a=o.length?o:null):i.which==p.ENTER&&(a=null),this.selectChoice(a),S(i),void(a&&a.length||this.open())}if((i.which===p.BACKSPACE&&1==this.keydowns||i.which==p.LEFT)&&0==r.offset&&!r.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void S(i);if(this.selectChoice(null),this.opened())switch(i.which){case p.UP:case p.DOWN:return this.moveHighlight(i.which===p.UP?-1:1),void S(i);case p.ENTER:return this.selectHighlighted(),void S(i);case p.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case p.ESC:return this.cancel(i),void S(i)}if(i.which!==p.TAB&&!p.isControl(i)&&!p.isFunctionKey(i)&&i.which!==p.BACKSPACE&&i.which!==p.ESC){if(i.which===p.ENTER){if(!1===this.opts.openOnEnter)return;if(i.altKey||i.ctrlKey||i.shiftKey||i.metaKey)return}this.open(),i.which!==p.PAGE_UP&&i.which!==p.PAGE_DOWN||S(i),i.which===p.ENTER&&S(i)}}}))),this.search.on("keyup",this.bind((function(e){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))}))),this.container.on("click",i,this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}))),this.container.on("focus",i,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,(function(t){null!=t&&(e.updateSelection(t),e.close(),e.clearSearch())}))}},clearSearch:function(){var e=this.getPlaceholder(),t=this.getMaxSearchWidth();void 0!==e&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(t>0?t:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i={},s=[],n=this;e(t).each((function(){n.id(this)in i||(i[n.id(this)]=0,s.push(this))})),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(s),n.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&null!=e&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var i=this.getVal(),s=this;e(t).each((function(){i.push(s.createChoice(this))})),this.setVal(i)},createChoice:function(t){var i,s,n=!t.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=e("<li class='select2-search-choice select2-locked'><div></div></li>"),a=n?o:r,l=this.id(t);return null!=(i=this.opts.formatSelection(t,a.find("div"),this.opts.escapeMarkup))&&a.find("div").replaceWith(e("<div></div>").html(i)),null!=(s=this.opts.formatSelectionCssClass(t,a.find("div")))&&a.addClass(s),n&&a.find(".select2-search-choice-close").on("mousedown",S).on("click dblclick",this.bind((function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),S(t),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),a.data("select2-data",t),a.insertBefore(this.searchContainer),l},unselect:function(t){var i,s,n=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data")){var o=e.Event("select2-removing");if(o.val=this.id(i),o.choice=i,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(s=m(this.id(i),n))>=0;)n.splice(s,1),this.setVal(n),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(e,t,i){var s=this.getVal(),n=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),r=this;n.each2((function(e,t){m(r.id(t.data("select2-data")),s)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))})),o.each2((function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")})),-1==this.highlight()&&!1!==i&&!0===this.opts.closeOnSelect&&r.highlight(0),!this.opts.createSearchChoice&&!n.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&I(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+z(r.opts.formatNoMatches,r.opts.element,r.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-b(this.search)},resizeSearch:function(){var t,i,s,n,o=b(this.search);t=function(t){if(!r){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);(r=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e(document.body).append(r)}return r.text(t.val()),r.width()}(this.search)+10,i=this.search.offset().left,(n=(s=this.selection.width())-(i-this.selection.offset().left)-o)<t&&(n=s-o),n<40&&(n=s-o),n<=0&&(n=t),this.search.width(Math.floor(n))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:v(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(t){if(this.select)this.select.val(t);else{var i=[],s={};e(t).each((function(){this in s||(i.push(this),s[this]=0)})),this.opts.element.val(0===i.length?"":i.join(this.opts.separator))}},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var i=0;i<t.length;i++)for(var s=0;s<e.length;s++)if(g(this.opts.id(t[i]),this.opts.id(e[s]))){t.splice(i,1),i--,e.splice(s,1);break}return{added:t,removed:e}},val:function(t,i){var s,n=this;if(0===arguments.length)return this.getVal();if((s=this.data()).length||(s=[]),!t&&0!==t)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:s}));if(this.setVal(t),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(s,this.data()));else{if(void 0===this.opts.initSelection)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(t){var o=e.map(t,n.id);n.setVal(o),n.updateSelection(t),n.clearSearch(),i&&n.triggerChange(n.buildChangeDetails(s,n.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){t.push(i.opts.id(e(this).data("select2-data")))})),this.setVal(t),this.triggerChange()},data:function(t,i){var s,n,o=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get();n=this.data(),t||(t=[]),s=e.map(t,(function(e){return o.opts.id(e)})),this.setVal(s),this.updateSelection(t),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(n,this.data()))}}),e.fn.select2=function(){var t,i,s,n,o,r=Array.prototype.slice.call(arguments,0),a=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],l=["opened","isFocused","container","dropdown"],c=["val","data"],h={search:"externalSearch"};return this.each((function(){if(0===r.length||"object"==typeof r[0])(t=0===r.length?{}:e.extend({},r[0])).element=e(this),"select"===t.element.get(0).tagName.toLowerCase()?o=t.element.prop("multiple"):(o=t.multiple||!1,"tags"in t&&(t.multiple=o=!0)),(i=o?new window.Select2.class.multi:new window.Select2.class.single).init(t);else{if("string"!=typeof r[0])throw"Invalid arguments to select2 plugin: "+r;if(m(r[0],a)<0)throw"Unknown method: "+r[0];if(n=void 0,void 0===(i=e(this).data("select2")))return;if("container"===(s=r[0])?n=i.container:"dropdown"===s?n=i.dropdown:(h[s]&&(s=h[s]),n=i[s].apply(i,r.slice(1))),m(r[0],l)>=0||m(r[0],c)>=0&&1==r.length)return!1}})),void 0===n?this:n},e.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,s){var n=[];return x(this.text(e),i.term,n,s),n.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,t,i){return e?i(this.text(e)):void 0},sortResults:function(e,t,i){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,t){},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return null==e?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return f(""+t).toUpperCase().indexOf(f(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,t,i,s){var n,o,r,a,l,c=e,h=!1;if(s.createSearchChoice&&s.tokenSeparators&&!(s.tokenSeparators.length<1)){for(;;){for(o=-1,r=0,a=s.tokenSeparators.length;r<a&&(l=s.tokenSeparators[r],!((o=e.indexOf(l))>=0));r++);if(o<0)break;if(n=e.substring(0,o),e=e.substring(o+l.length),n.length>0&&null!=(n=s.createSearchChoice.call(this,n,t))&&void 0!==s.id(n)&&null!==s.id(n)){for(h=!1,r=0,a=t.length;r<a;r++)if(g(s.id(n),s.id(t[r]))){h=!0;break}h||i(n)}}return c!==e?e:void 0}},escapeMarkup:T,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,t){},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,i){return"Loading failed"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results"},formatSearching:function(){return"Searching"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:E,local:F,tags:k},util:{debounce:y,markMatch:x,escapeMarkup:T,stripDiacritics:f},class:{abstract:i,single:s,multi:n}}}function u(t){var i=e(document.createTextNode(""));t.before(i),i.before(t),i.remove()}function f(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return d[e]||e}))}function m(e,t){for(var i=0,s=t.length;i<s;i+=1)if(g(e,t[i]))return i;return-1}function g(e,t){return e===t||void 0!==e&&void 0!==t&&(null!==e&&null!==t&&(e.constructor===String?e+""==t+"":t.constructor===String&&t+""==e+""))}function v(e,t,i){var s,n,o;if(null===e||e.length<1)return[];for(n=0,o=(s=e.split(t)).length;n<o;n+=1)s[n]=i(s[n]);return s}function b(e){return e.outerWidth(!1)-e.width()}function w(t){var i="keyup-change-value";t.on("keydown",(function(){void 0===e.data(t,i)&&e.data(t,i,t.val())})),t.on("keyup",(function(){var s=e.data(t,i);void 0!==s&&t.val()!==s&&(e.removeData(t,i),t.trigger("keyup-change"))}))}function y(e,t,i){var s;return i=i||void 0,function(){var n=arguments;window.clearTimeout(s),s=window.setTimeout((function(){t.apply(i,n)}),e)}}function S(e){e.preventDefault(),e.stopPropagation()}function C(t,i,s){var n,o,r=[];(n=e.trim(t.attr("class")))&&e((n=""+n).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&r.push(this)})),(n=e.trim(i.attr("class")))&&e((n=""+n).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(o=s(this))&&r.push(o)})),t.attr("class",r.join(" "))}function x(e,t,i,s){var n=f(e.toUpperCase()).indexOf(f(t.toUpperCase())),o=t.length;n<0?i.push(s(e)):(i.push(s(e.substring(0,n))),i.push("<span class='select2-match'>"),i.push(s(e.substring(n,n+o))),i.push("</span>"),i.push(s(e.substring(n+o,e.length))))}function T(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function E(t){var i,s=null,n=t.quietMillis||100,o=t.url,r=this;return function(a){window.clearTimeout(i),i=window.setTimeout((function(){var i=t.data,n=o,l=t.transport||e.fn.select2.ajaxDefaults.transport,c={type:t.type||"GET",cache:t.cache||!1,jsonpCallback:t.jsonpCallback||void 0,dataType:t.dataType||"json"},h=e.extend({},e.fn.select2.ajaxDefaults.params,c);i=i?i.call(r,a.term,a.page,a.context):null,n="function"==typeof n?n.call(r,a.term,a.page,a.context):n,s&&"function"==typeof s.abort&&s.abort(),t.params&&(e.isFunction(t.params)?e.extend(h,t.params.call(r)):e.extend(h,t.params)),e.extend(h,{url:n,dataType:t.dataType,data:i,success:function(e){var i=t.results(e,a.page,a);a.callback(i)},error:function(e,t,i){var s={hasError:!0,jqXHR:e,textStatus:t,errorThrown:i};a.callback(s)}}),s=l.call(r,h)}),n)}}function F(t){var i,s,n=t,o=function(e){return""+e.text};e.isArray(n)&&(n={results:s=n}),!1===e.isFunction(n)&&(s=n,n=function(){return s});var r=n();return r.text&&(o=r.text,e.isFunction(o)||(i=r.text,o=function(e){return e[i]})),function(t){var i,s=t.term,r={results:[]};""!==s?(i=function(n,r){var a,l;if((n=n[0]).children){for(l in a={},n)n.hasOwnProperty(l)&&(a[l]=n[l]);a.children=[],e(n.children).each2((function(e,t){i(t,a.children)})),(a.children.length||t.matcher(s,o(a),n))&&r.push(a)}else t.matcher(s,o(n),n)&&r.push(n)},e(n().results).each2((function(e,t){i(t,r.results)})),t.callback(r)):t.callback(n())}}function k(t){var i=e.isFunction(t);return function(s){var n=s.term,o={results:[]},r=i?t(s):t;e.isArray(r)&&(e(r).each((function(){var e=void 0!==this.text,t=e?this.text:this;(""===n||s.matcher(n,t))&&o.results.push(e?this:{id:this,text:this})})),s.callback(o))}}function I(t,i){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(i+" must be a string, function, or falsy value")}function z(t,i){if(e.isFunction(t)){var s=Array.prototype.slice.call(arguments,2);return t.apply(i,s)}return t}function U(){var t=this;e.each(arguments,(function(e,i){t[i].remove(),t[i]=null}))}function P(t,i){var s=function(){};return(s.prototype=new t).constructor=s,s.prototype.parent=t.prototype,s.prototype=e.extend(s.prototype,i),s}}(n)},88:function(e,t,i){var s=i(0);!function(e){e.fn.drag=function(t,i,s){var n="string"==typeof t?t:"",o=e.isFunction(t)?t:e.isFunction(i)?i:null;return 0!==n.indexOf("drag")&&(n="drag"+n),s=(t==o?i:s)||{},o?this.bind(n,s,o):this.trigger(n)};var t=e.event,i=t.special,s=i.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var i=e.data(this,s.datakey),n=t.data||{};i.related+=1,e.each(s.defaults,(function(e,t){void 0!==n[e]&&(i[e]=n[e])}))},remove:function(){e.data(this,s.datakey).related-=1},setup:function(){if(!e.data(this,s.datakey)){var i=e.extend({related:0},s.defaults);e.data(this,s.datakey,i),t.add(this,"touchstart mousedown",s.init,i),this.attachEvent&&this.attachEvent("ondragstart",s.dontstart)}},teardown:function(){(e.data(this,s.datakey)||{}).related||(e.removeData(this,s.datakey),t.remove(this,"touchstart mousedown",s.init),s.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",s.dontstart))},init:function(n){if(!s.touched){var o,r=n.data;if(!(0!=n.which&&r.which>0&&n.which!=r.which)&&!e(n.target).is(r.not)&&(!r.handle||e(n.target).closest(r.handle,n.currentTarget).length)&&(s.touched="touchstart"==n.type?this:null,r.propagates=1,r.mousedown=this,r.interactions=[s.interaction(this,r)],r.target=n.target,r.pageX=n.pageX,r.pageY=n.pageY,r.dragging=null,o=s.hijack(n,"draginit",r),r.propagates))return(o=s.flatten(o))&&o.length&&(r.interactions=[],e.each(o,(function(){r.interactions.push(s.interaction(this,r))}))),r.propagates=r.interactions.length,!1!==r.drop&&i.drop&&i.drop.handler(n,r),s.textselect(!1),s.touched?t.add(s.touched,"touchmove touchend",s.handler,r):t.add(document,"mousemove mouseup",s.handler,r),!(!s.touched||r.live)&&void 0}},interaction:function(t,i){var n=e(t)[i.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new s.callback,droppable:[],offset:n}},handler:function(n){var o=n.data;switch(n.type){case!o.dragging&&"touchmove":n.preventDefault();case!o.dragging&&"mousemove":if(Math.pow(n.pageX-o.pageX,2)+Math.pow(n.pageY-o.pageY,2)<Math.pow(o.distance,2))break;n.target=o.target,s.hijack(n,"dragstart",o),o.propagates&&(o.dragging=!0);case"touchmove":n.preventDefault();case"mousemove":if(o.dragging){if(s.hijack(n,"drag",o),o.propagates){!1!==o.drop&&i.drop&&i.drop.handler(n,o);break}n.type="mouseup"}case"touchend":case"mouseup":default:s.touched?t.remove(s.touched,"touchmove touchend",s.handler):t.remove(document,"mousemove mouseup",s.handler),o.dragging&&(!1!==o.drop&&i.drop&&i.drop.handler(n,o),s.hijack(n,"dragend",o)),s.textselect(!0),!1===o.click&&o.dragging&&e.data(o.mousedown,"suppress.click",(new Date).getTime()+5),o.dragging=s.touched=!1}},hijack:function(i,n,o,r,a){if(o){var l,c,h,p={event:i.originalEvent,type:i.type},d=n.indexOf("drop")?"drag":"drop",u=r||0,f=isNaN(r)?o.interactions.length:r;i.type=n,i.originalEvent=null,o.results=[];do{if(c=o.interactions[u]){if("dragend"!==n&&c.cancelled)continue;h=s.properties(i,o,c),c.results=[],e(a||c[d]||o.droppable).each((function(r,a){if(h.target=a,i.isPropagationStopped=function(){return!1},!1===(l=a?t.dispatch.call(a,i,h):null)?("drag"==d&&(c.cancelled=!0,o.propagates-=1),"drop"==n&&(c[d][r]=null)):"dropinit"==n&&c.droppable.push(s.element(l)||a),"dragstart"==n&&(c.proxy=e(s.element(l)||c.drag)[0]),c.results.push(l),delete i.result,"dropinit"!==n)return l})),o.results[u]=s.flatten(c.results),"dropinit"==n&&(c.droppable=s.flatten(c.droppable)),"dragstart"!=n||c.cancelled||h.update()}}while(++u<f);return i.type=p.type,i.originalEvent=p.event,s.flatten(o.results)}},properties:function(e,t,i){var n=i.callback;return n.drag=i.drag,n.proxy=i.proxy||i.drag,n.startX=t.pageX,n.startY=t.pageY,n.deltaX=e.pageX-t.pageX,n.deltaY=e.pageY-t.pageY,n.originalX=i.offset.left,n.originalY=i.offset.top,n.offsetX=n.originalX+n.deltaX,n.offsetY=n.originalY+n.deltaY,n.drop=s.flatten((i.drop||[]).slice()),n.available=s.flatten((i.droppable||[]).slice()),n},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,(function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?s.flatten(t):t}))},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",s.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};s.callback.prototype={update:function(){i.drop&&this.available.length&&e.each(this.available,(function(e){i.drop.locate(this,e)}))}};var n=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return n.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var o=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,i){if(i){var s=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||null;s&&e.each(o.props,(function(e,i){t[i]=s[i]}))}return t}}}(s),e.exports=s.drag},89:function(e,t,i){var s=i(0);!function(e){e.fn.drop=function(t,i,s){var n="string"==typeof t?t:"",o=e.isFunction(t)?t:e.isFunction(i)?i:null;return 0!==n.indexOf("drop")&&(n="drop"+n),s=(t==o?i:s)||{},o?this.bind(n,s,o):this.trigger(n)},e.drop=function(t){t=t||{},i.multi=!0===t.multi?1/0:!1===t.multi?1:isNaN(t.multi)?i.multi:t.multi,i.delay=t.delay||i.delay,i.tolerance=e.isFunction(t.tolerance)?t.tolerance:null===t.tolerance?null:i.tolerance,i.mode=t.mode||i.mode||"intersect"};var t=e.event.special,i=e.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(t){e.data(this,i.datakey).related+=1},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){if(!e.data(this,i.datakey)){e.data(this,i.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),i.targets.push(this)}},teardown:function(){if(!(e.data(this,i.datakey)||{}).related){e.removeData(this,i.datakey);var t=this;i.targets=e.grep(i.targets,(function(e){return e!==t}))}},handler:function(s,n){var o;if(n)switch(s.type){case"mousedown":case"touchstart":o=e(i.targets),"string"==typeof n.drop&&(o=o.filter(n.drop)),o.each((function(){var t=e.data(this,i.datakey);t.active=[],t.anyactive=0,t.winner=0})),n.droppable=o,t.drag.hijack(s,"dropinit",n);break;case"mousemove":case"touchmove":i.event=s,i.timer||i.tolerate(n);break;case"mouseup":case"touchend":i.timer=clearTimeout(i.timer),n.propagates&&(t.drag.hijack(s,"drop",n),t.drag.hijack(s,"dropend",n))}},locate:function(t,s){var n=e.data(t,i.datakey),o=e(t),r=o.offset()||{},a=o.outerHeight(),l=o.outerWidth(),c={elem:t,width:l,height:a,top:r.top,left:r.left,right:r.left+l,bottom:r.top+a};return n&&(n.location=c,n.index=s,n.elem=t),c},contains:function(e,t){return(t[0]||t.left)>=e.left&&(t[0]||t.right)<=e.right&&(t[1]||t.top)>=e.top&&(t[1]||t.bottom)<=e.bottom},modes:{intersect:function(e,t,i){return this.contains(i,[e.pageX,e.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(e,t,i){return Math.max(0,Math.min(i.bottom,t.bottom)-Math.max(i.top,t.top))*Math.max(0,Math.min(i.right,t.right)-Math.max(i.left,t.left))},fit:function(e,t,i){return this.contains(i,t)?1:0},middle:function(e,t,i){return this.contains(i,[t.left+.5*t.width,t.top+.5*t.height])?1:0}},sort:function(e,t){return t.winner-e.winner||e.index-t.index},tolerate:function(s){var n,o,r,a,l,c,h,p,d=0,u=s.interactions.length,f=[i.event.pageX,i.event.pageY],m=i.tolerance||i.modes[i.mode];do{if(p=s.interactions[d]){if(!p)return;p.drop=[],l=[],c=p.droppable.length,m&&(r=i.locate(p.proxy)),n=0;do{if(h=p.droppable[n]){if(!(o=(a=e.data(h,i.datakey)).location))continue;a.winner=m?m.call(i,i.event,r,o):i.contains(o,f)?1:0,l.push(a)}}while(++n<c);l.sort(i.sort),n=0;do{(a=l[n])&&(a.winner&&p.drop.length<i.multi?(a.active[d]||a.anyactive||(!1!==t.drag.hijack(i.event,"dropstart",s,d,a.elem)[0]?(a.active[d]=1,a.anyactive+=1):a.winner=0),a.winner&&p.drop.push(a.elem)):a.active[d]&&1==a.anyactive&&(t.drag.hijack(i.event,"dropend",s,d,a.elem),a.active[d]=0,a.anyactive-=1))}while(++n<c)}}while(++d<u);i.last&&f[0]==i.last.pageX&&f[1]==i.last.pageY?delete i.timer:i.timer=setTimeout((function(){i.tolerate(s)}),i.delay),i.last=i.event}};t.dropinit=t.dropstart=t.dropend=i}(s),e.exports=s.drop}}]);